!function e(t,r,n){function o(s,i){if(!r[s]){if(!t[s]){var c="function"==typeof require&&require;if(!i&&c)return c(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/freeze"),__esModule:!0}},{"core-js/library/fn/object/freeze":3}],2:[function(e,t,r){t.exports={"default":e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":4}],3:[function(e,t,r){e("../../modules/es6.object.freeze"),t.exports=e("../../modules/$.core").Object.freeze},{"../../modules/$.core":9,"../../modules/es6.object.freeze":54}],4:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/$.core").Promise},{"../modules/$.core":9,"../modules/es6.object.to-string":55,"../modules/es6.promise":56,"../modules/es6.string.iterator":57,"../modules/web.dom.iterable":58}],5:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],6:[function(e,t,r){var n=e("./$.is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./$.is-object":23}],7:[function(e,t,r){var n=e("./$.cof"),o=e("./$.wks")("toStringTag"),a="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=(t=Object(e))[o])?r:a?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},{"./$.cof":8,"./$.wks":51}],8:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],9:[function(e,t,r){var n=t.exports={};"number"==typeof __e&&(__e=n)},{}],10:[function(e,t,r){var n=e("./$.a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":5}],11:[function(e,t,r){var n=e("./$.global"),o=e("./$.core"),a="prototype",s=function(e,t){return function(){return e.apply(t,arguments)}},i=function(e,t,r){var c,u,l,p,h=e&i.G,f=e&i.P,m=h?n:e&i.S?n[t]:(n[t]||{})[a],d=h?o:o[t]||(o[t]={});h&&(r=t);for(c in r)u=!(e&i.F)&&m&&c in m,u&&c in d||(l=u?m[c]:r[c],h&&"function"!=typeof m[c]?p=r[c]:e&i.B&&u?p=s(l,n):e&i.W&&m[c]==l?!function(e){p=function(t){return this instanceof e?new e(t):e(t)},p[a]=e[a]}(l):p=f&&"function"==typeof l?s(Function.call,l):l,d[c]=p,f&&((d[a]||(d[a]={}))[c]=l))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,t.exports=i},{"./$.core":9,"./$.global":16}],12:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],13:[function(e,t,r){var n=e("./$.is-object"),o=e("./$.global").document,a=n(o)&&n(o.createElement);t.exports=function(e){return a?o.createElement(e):{}}},{"./$.global":16,"./$.is-object":23}],14:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],15:[function(e,t,r){var n=e("./$.ctx"),o=e("./$.iter-call"),a=e("./$.is-array-iter"),s=e("./$.an-object"),i=e("./$.to-length"),c=e("./core.get-iterator-method");t.exports=function(e,t,r,u){var l,p,h,f=c(e),m=n(r,u,t?2:1),d=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(a(f))for(l=i(e.length);l>d;d++)t?m(s(p=e[d])[0],p[1]):m(e[d]);else for(h=f.call(e);!(p=h.next()).done;)o(h,m,p.value,t)}},{"./$.an-object":6,"./$.ctx":10,"./$.is-array-iter":22,"./$.iter-call":25,"./$.to-length":48,"./core.get-iterator-method":52}],16:[function(e,t,r){var n="undefined"!=typeof self&&self.Math==Math?self:Function("return this")();t.exports=n,"number"==typeof __g&&(__g=n)},{}],17:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],18:[function(e,t,r){var n=e("./$"),o=e("./$.property-desc");t.exports=e("./$.support-desc")?function(e,t,r){return n.setDesc(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./$":31,"./$.property-desc":35,"./$.support-desc":43}],19:[function(e,t,r){t.exports=e("./$.global").document&&document.documentElement},{"./$.global":16}],20:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],21:[function(e,t,r){var n=e("./$.cof");t.exports=0 in Object("z")?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./$.cof":8}],22:[function(e,t,r){var n=e("./$.iterators"),o=e("./$.wks")("iterator");t.exports=function(e){return(n.Array||Array.prototype[o])===e}},{"./$.iterators":30,"./$.wks":51}],23:[function(e,t,r){t.exports=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}},{}],24:[function(e,t,r){t.exports="keys"in[]&&!("next"in[].keys())},{}],25:[function(e,t,r){var n=e("./$.an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(a){var s=e["return"];throw void 0!==s&&n(s.call(e)),a}}},{"./$.an-object":6}],26:[function(e,t,r){"use strict";var n=e("./$"),o={};e("./$.hide")(o,e("./$.wks")("iterator"),function(){return this}),t.exports=function(t,r,a){t.prototype=n.create(o,{next:e("./$.property-desc")(1,a)}),e("./$.tag")(t,r+" Iterator")}},{"./$":31,"./$.hide":18,"./$.property-desc":35,"./$.tag":44,"./$.wks":51}],27:[function(e,t,r){"use strict";var n=e("./$.library"),o=e("./$.def"),a=e("./$.redef"),s=e("./$.hide"),i=e("./$.has"),c=e("./$.wks")("iterator"),u=e("./$.iterators"),l="@@iterator",p="keys",h="values",f=function(){return this};t.exports=function(t,r,m,d,y,v,x){e("./$.iter-create")(m,r,d);var g,S,b=function(e){switch(e){case p:return function(){return new m(this,e)};case h:return function(){return new m(this,e)}}return function(){return new m(this,e)}},$=r+" Iterator",w=t.prototype,P=w[c]||w[l]||y&&w[y],_=P||b(y);if(P){var k=e("./$").getProto(_.call(new t));e("./$.tag")(k,$,!0),!n&&i(w,l)&&s(k,c,f)}if((!n||x)&&s(w,c,_),u[r]=_,u[$]=f,y)if(g={keys:v?_:b(p),values:y==h?_:b(h),entries:y!=h?_:b("entries")},x)for(S in g)S in w||a(w,S,g[S]);else o(o.P+o.F*e("./$.iter-buggy"),r,g)}},{"./$":31,"./$.def":11,"./$.has":17,"./$.hide":18,"./$.iter-buggy":24,"./$.iter-create":26,"./$.iterators":30,"./$.library":32,"./$.redef":36,"./$.tag":44,"./$.wks":51}],28:[function(e,t,r){var n=e("./$.wks")("iterator"),o=!1;try{var a=[7][n]();a["return"]=function(){o=!0},Array.from(a,function(){throw 2})}catch(s){}t.exports=function(e){if(!o)return!1;var t=!1;try{var r=[7],a=r[n]();a.next=function(){t=!0},r[n]=function(){return a},e(r)}catch(s){}return t}},{"./$.wks":51}],29:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],30:[function(e,t,r){t.exports={}},{}],31:[function(e,t,r){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},{}],32:[function(e,t,r){t.exports=!0},{}],33:[function(e,t,r){var n=e("./$.redef");t.exports=function(e,t){for(var r in t)n(e,r,t[r]);return e}},{"./$.redef":36}],34:[function(e,t,r){t.exports=function(t,r){var n=e("./$.def"),o=(e("./$.core").Object||{})[t]||Object[t],a={};a[t]=r(o),n(n.S+n.F*e("./$.fails")(function(){o(1)}),"Object",a)}},{"./$.core":9,"./$.def":11,"./$.fails":14}],35:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],36:[function(e,t,r){t.exports=e("./$.hide")},{"./$.hide":18}],37:[function(e,t,r){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},{}],38:[function(e,t,r){var n=e("./$").getDesc,o=e("./$.is-object"),a=e("./$.an-object"),s=function(e,t){if(a(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r){try{r=e("./$.ctx")(Function.call,n(Object.prototype,"__proto__").set,2),r({},[])}catch(o){t=!0}return function(e,n){return s(e,n),t?e.__proto__=n:r(e,n),e}}():void 0),check:s}},{"./$":31,"./$.an-object":6,"./$.ctx":10,"./$.is-object":23}],39:[function(e,t,r){var n=e("./$.global"),o="__core-js_shared__",a=n[o]||(n[o]={});t.exports=function(e){return a[e]||(a[e]={})}},{"./$.global":16}],40:[function(e,t,r){"use strict";var n=e("./$"),o=e("./$.wks")("species");t.exports=function(t){!e("./$.support-desc")||o in t||n.setDesc(t,o,{configurable:!0,get:function(){return this}})}},{"./$":31,"./$.support-desc":43,"./$.wks":51}],41:[function(e,t,r){t.exports=function(e,t,r){if(!(e instanceof t))throw TypeError(r+": use the 'new' operator!");return e}},{}],42:[function(e,t,r){var n=e("./$.to-integer"),o=e("./$.defined");t.exports=function(e){return function(t,r){var a,s,i=String(o(t)),c=n(r),u=i.length;return 0>c||c>=u?e?"":void 0:(a=i.charCodeAt(c),55296>a||a>56319||c+1===u||(s=i.charCodeAt(c+1))<56320||s>57343?e?i.charAt(c):a:e?i.slice(c,c+2):(a-55296<<10)+(s-56320)+65536)}}},{"./$.defined":12,"./$.to-integer":46}],43:[function(e,t,r){t.exports=!e("./$.fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./$.fails":14}],44:[function(e,t,r){var n=e("./$.has"),o=e("./$.hide"),a=e("./$.wks")("toStringTag");t.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,a)&&o(e,a,t)}},{"./$.has":17,"./$.hide":18,"./$.wks":51}],45:[function(e,t,r){"use strict";var n,o,a,s=e("./$.ctx"),i=e("./$.invoke"),c=e("./$.html"),u=e("./$.dom-create"),l=e("./$.global"),p=l.process,h=l.setImmediate,f=l.clearImmediate,m=l.MessageChannel,d=0,y={},v="onreadystatechange",x=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},g=function(e){x.call(e.data)};h&&f||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++d]=function(){i("function"==typeof e?e:Function(e),t)},n(d),d},f=function(e){delete y[e]},"process"==e("./$.cof")(p)?n=function(e){p.nextTick(s(x,e,1))}:m?(o=new m,a=o.port2,o.port1.onmessage=g,n=s(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScript?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",g,!1)):n=v in u("script")?function(e){c.appendChild(u("script"))[v]=function(){c.removeChild(this),x.call(e)}}:function(e){setTimeout(s(x,e,1),0)}),t.exports={set:h,clear:f}},{"./$.cof":8,"./$.ctx":10,"./$.dom-create":13,"./$.global":16,"./$.html":19,"./$.invoke":20}],46:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],47:[function(e,t,r){var n=e("./$.iobject"),o=e("./$.defined");t.exports=function(e){return n(o(e))}},{"./$.defined":12,"./$.iobject":21}],48:[function(e,t,r){var n=e("./$.to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./$.to-integer":46}],49:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],50:[function(e,t,r){t.exports=function(){}},{}],51:[function(e,t,r){var n=e("./$.shared")("wks"),o=e("./$.global").Symbol;t.exports=function(t){return n[t]||(n[t]=o&&o[t]||(o||e("./$.uid"))("Symbol."+t))}},{"./$.global":16,"./$.shared":39,"./$.uid":49}],52:[function(e,t,r){var n=e("./$.classof"),o=e("./$.wks")("iterator"),a=e("./$.iterators");t.exports=e("./$.core").getIteratorMethod=function(e){return void 0!=e?e[o]||e["@@iterator"]||a[n(e)]:void 0}},{"./$.classof":7,"./$.core":9,"./$.iterators":30,"./$.wks":51}],53:[function(e,t,r){"use strict";var n=e("./$.unscope"),o=e("./$.iter-step"),a=e("./$.iterators"),s=e("./$.to-iobject");e("./$.iter-define")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},{"./$.iter-define":27,"./$.iter-step":29,"./$.iterators":30,"./$.to-iobject":47,"./$.unscope":50}],54:[function(e,t,r){var n=e("./$.is-object");e("./$.object-sap")("freeze",function(e){return function(t){return e&&n(t)?e(t):t}})},{"./$.is-object":23,"./$.object-sap":34}],55:[function(e,t,r){},{}],56:[function(e,t,r){"use strict";var n,o=e("./$"),a=e("./$.library"),s=e("./$.global"),i=e("./$.ctx"),c=e("./$.classof"),u=e("./$.def"),l=e("./$.is-object"),p=e("./$.an-object"),h=e("./$.a-function"),f=e("./$.strict-new"),m=e("./$.for-of"),d=e("./$.set-proto").set,y=e("./$.same"),v=e("./$.species"),x=e("./$.wks")("species"),g=e("./$.uid")("record"),S="Promise",b=s.process,$="process"==c(b),w=b&&b.nextTick||e("./$.task").set,P=s[S],_=function(e){var t=new P(function(){});return e&&(t.constructor=Object),P.resolve(t)===t},k=function(){function t(e){var r=new P(e);return d(r,t.prototype),r}var r=!1;try{if(r=P&&P.resolve&&_(),d(t,P),t.prototype=o.create(P.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(r=!1),r&&e("./$.support-desc")){var n=!1;P.resolve(o.setDesc({},"then",{get:function(){n=!0}})),r=n}}catch(a){r=!1}return r}(),O=function(e){return l(e)&&(k?"Promise"==c(e):g in e)},I=function(e,t){return a&&e===P&&t===n?!0:y(e,t)},M=function(e){var t=p(e)[x];return void 0!=t?t:e},q=function(e){var t;return l(e)&&"function"==typeof(t=e.then)?t:!1},C=function(e,t){if(!e.n){e.n=!0;var r=e.c;w.call(s,function(){for(var n=e.v,o=1==e.s,a=0,i=function(t){var r,a,s=o?t.ok:t.fail;try{s?(o||(e.h=!0),r=s===!0?n:s(n),r===t.P?t.rej(TypeError("Promise-chain cycle")):(a=q(r))?a.call(r,t.res,t.rej):t.res(r)):t.rej(n)}catch(i){t.rej(i)}};r.length>a;)i(r[a++]);r.length=0,e.n=!1,t&&setTimeout(function(){w.call(s,function(){N(e.p)&&($?b.emit("unhandledRejection",n,e.p):s.console&&console.error&&console.error("Unhandled promise rejection",n)),e.a=void 0})},1)})}},N=function(e){var t,r=e[g],n=r.a||r.c,o=0;if(r.h)return!1;for(;n.length>o;)if(t=n[o++],t.fail||!N(t.P))return!1;return!0},j=function(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,t.a=t.c.slice(),C(t,!0))},E=function(e){var t,r=this;if(!r.d){r.d=!0,r=r.r||r;try{(t=q(e))?w.call(s,function(){var n={r:r,d:!1};try{t.call(e,i(E,n,1),i(j,n,1))}catch(o){j.call(n,o)}}):(r.v=e,r.s=1,C(r,!1))}catch(n){j.call({r:r,d:!1},n)}}};k||(P=function(e){h(e);var t={p:f(this,P,S),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};this[g]=t;try{e(i(E,t,1),i(j,t,1))}catch(r){j.call(t,r)}},e("./$.mix")(P.prototype,{then:function(e,t){var r=p(p(this).constructor)[x],n={ok:"function"==typeof e?e:!0,fail:"function"==typeof t?t:!1},o=n.P=new(void 0!=r?r:P)(function(e,t){n.res=h(e),n.rej=h(t)}),a=this[g];return a.c.push(n),a.a&&a.a.push(n),a.s&&C(a,!1),o},"catch":function(e){return this.then(void 0,e)}})),u(u.G+u.W+u.F*!k,{Promise:P}),e("./$.tag")(P,S),v(P),v(n=e("./$.core")[S]),u(u.S+u.F*!k,S,{reject:function(e){return new this(function(t,r){r(e)})}}),u(u.S+u.F*(!k||_(!0)),S,{resolve:function(e){return O(e)&&I(e.constructor,this)?e:new this(function(t){t(e)})}}),u(u.S+u.F*!(k&&e("./$.iter-detect")(function(e){P.all(e)["catch"](function(){})})),S,{all:function(e){var t=M(this),r=[];return new t(function(n,a){m(e,!1,r.push,r);var s=r.length,i=Array(s);s?o.each.call(r,function(e,r){t.resolve(e).then(function(e){i[r]=e,--s||n(i)},a)}):n(i)})},race:function(e){var t=M(this);return new t(function(r,n){m(e,!1,function(e){t.resolve(e).then(r,n)})})}})},{"./$":31,"./$.a-function":5,"./$.an-object":6,"./$.classof":7,"./$.core":9,"./$.ctx":10,"./$.def":11,"./$.for-of":15,"./$.global":16,"./$.is-object":23,"./$.iter-detect":28,"./$.library":32,"./$.mix":33,"./$.same":37,"./$.set-proto":38,"./$.species":40,"./$.strict-new":41,"./$.support-desc":43,"./$.tag":44,"./$.task":45,"./$.uid":49,"./$.wks":51}],57:[function(e,t,r){"use strict";var n=e("./$.string-at")(!0);e("./$.iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./$.iter-define":27,"./$.string-at":42}],58:[function(e,t,r){e("./es6.array.iterator");var n=e("./$.iterators");n.NodeList=n.HTMLCollection=n.Array},{"./$.iterators":30,"./es6.array.iterator":53}],59:[function(e,t,r){"use strict";t.exports=window.Immutable},{}],60:[function(e,t,r){"use strict";t.exports=window.jQuery},{}],61:[function(e,t,r){"use strict";t.exports=window._},{}],62:[function(e,t,r){"use strict";t.exports=window.React},{}],63:[function(e,t,r){"use strict";var n=e("_external/react"),o=e("./consts"),a=e("./FlatX.react"),s=e("./FlatO.react"),i=e("../core/players"),c=n.createClass({displayName:"ChromeBackground",render:function(){var e=this.props.width||200,t=e/2,r=this.props.height||700,o=r/2;return n.DOM.rect({className:"chrome-background",x:-t,y:-o,width:e,height:r})}}),u=n.createClass({displayName:"TurnIndicator",getDefaultProps:function(){return{stemThickness:1,scale:1}},render:function(){var e=this.props.scale,t=this.props.stemThickness*e,r=t/2;return n.DOM.polygon({className:"turn-indicator",points:"0,-"+e+" "+e+",0 0,"+e+" 0,"+r+" -"+e+","+r+" -"+e+",-"+r+", 0,-"+r,transform:this.props.transform})}}),l=n.createClass({displayName:"PlayerRow",getDefaultProps:function(){return{width:180,height:60}},render:function(){var e=this.props.player===i.O,t=this.props.isPlayerTurn,r=this.props.width,c=this.props.height,l=r/2,p=c/2,h=e?s:a,f=e?"chrome-icon-o":"chrome-icon-x",m=n.DOM.rect({className:"chrome-player-row",x:-l,y:-p,width:r,height:c}),d=c/2-10,y=d-l+5,v=null;t&&(v=n.createElement(u,{scale:d,transform:"translate("+y+", 0)"}));var x=e?o.oPieceScale:o.xPieceScale,g=.8*c,S=g*x,b=y+d+5+g/2,$=n.createElement(h,{className:f,transform:"translate("+b+",0),scale("+S+")"}),w=null;return n.DOM.g({transform:this.props.transform},m,$,v,w)}}),p=n.createClass({displayName:"Chrome",render:function(){var e=this.props.sceneFrameProperties,t=this.props.playerTurn,r=e.chromeWidth,o=e.chromeMargin,a=e.height-2*o,s=n.createElement(c,{width:r,height:a}),u=n.createElement(l,{player:i.X,isPlayerTurn:t===i.X,transform:"translate(0, -350)"}),p=n.createElement(l,{player:i.O,isPlayerTurn:t===i.O,transform:"translate(0, -270)"});return n.DOM.g({transform:this.props.transform},s,u,p)}});t.exports=p},{"../core/players":91,"./FlatO.react":64,"./FlatX.react":65,"./consts":72,"_external/react":62}],64:[function(e,t,r){"use strict";var n=e("_external/react"),o=(e("_external/lodash"),n.createClass({displayName:"FlatO",render:function(){return n.DOM.circle({r:.34,className:this.props.className,transform:this.props.transform,strokeWidth:.29})}}));t.exports=o},{"_external/lodash":61,"_external/react":62}],65:[function(e,t,r){"use strict";var n=e("_external/react"),o=(e("_external/lodash"),n.createClass({displayName:"XLeg",render:function(){return n.DOM.rect({x:-.17,y:-.5,width:.34,height:1,transform:this.props.transform})}})),a=n.createClass({displayName:"FlatX",render:function(){var e=n.createElement(o,{transform:"skewX(45)"}),t=n.createElement(o,{transform:"skewX(-45)"});return n.DOM.g({className:this.props.className,transform:this.props.transform,fill:this.props.fill},e,t)}});t.exports=a},{"_external/lodash":61,"_external/react":62}],66:[function(e,t,r){"use strict";var n=e("_external/react"),o=(e("_external/lodash"),e("./Plane.react")),a=e("./XPiece.react"),s=e("./OPiece.react"),i=e("../core/AnimStates"),c=.05,u=[0,Math.PI/2,Math.PI,3*Math.PI/2],l=.3,p=n.createClass({displayName:"BoardPiece",render:function(){var e=this.props.squareState,t=this.props.x,r=this.props.y,o=this.props.flashScale||1,c=this.props.scale||.7,u=e.animState;u===i.HIGHLIGHTED?c=1.3*c:u===i.FLASHING&&(c*=o);var l=void 0;if(e.isXPiece)l=a,c=.86*c;else{if(!e.isOPiece)return null;l=s}var p="translate("+t+","+r+"),scale("+c+")";return n.createElement(l,{transform:p})}}),h=n.createClass({displayName:"SquareButtonLayer",_handleClick:function(){this.props.onClick&&this.props.onClick({planeIndex:this.props.planeIndex,rowIndex:this.props.rowIndex,colIndex:this.props.colIndex})},render:function(){var e=this.props.x,t=this.props.y;return n.DOM.rect({className:"square-button-layer",x:e-.5,y:t-.5,width:1,height:1,onClick:this._handleClick})}}),f=n.createClass({displayName:"GameBoardPlane",render:function(){for(var e=this.props.boardState,t=this.props.planeIndex,r=this.props.y||0,a=this.props.skew||0,s=this.props.t,i=n.createElement(o,{skew:a}),f=[],m=0;4>m;m+=1)for(var d=m-1.5,y=0;4>y;y+=1){var v=y-1.5,x=(t+y+m)%4,g=u[x],S=g+c*s/(2*Math.PI),b=1+l*Math.sin(S),$=e.getSquare(t,m,y),w=n.createElement(p,{key:"piece-"+m+"-"+y,squareState:$,x:v,y:d,flashScale:b});if(w&&f.push(w),$.clickable){var P=n.createElement(h,{key:"button-"+m+"-"+y,planeIndex:t,rowIndex:m,colIndex:y,x:v,y:d,onClick:this.props.onClickSquare});f.push(P)}}var _=n.DOM.g({transform:"skewX("+a+")"},f);return n.DOM.g({transform:"translate(0,"+r+")"},i,_)}}),m=n.createClass({displayName:"GameBoard",render:function(){for(var e=-30,t=5,r=this.props.t,o=this.props.onClickSquare,a=[],s=-2.5*t,i=0;4>i;i+=1,s+=t){var c=n.createElement(f,{key:"plane"+i,t:r,planeIndex:i,boardState:this.props.boardState,y:s,skew:e,onClickSquare:o});a.push(c)}return n.DOM.g(null,a)}});t.exports=m},{"../core/AnimStates":73,"./OPiece.react":67,"./Plane.react":68,"./XPiece.react":71,"_external/lodash":61,"_external/react":62}],67:[function(e,t,r){"use strict";var n=e("_external/react"),o=e("./FlatO.react"),a=(e("_external/lodash"),n.createClass({displayName:"OPiece",render:function(){var e=.05,t=n.createElement(o,{className:"o-piece-front",transform:"skewX(0)"}),r=n.createElement(o,{className:"o-piece-side",transform:"translate(0,"+e+"),skewX(0)"});return n.DOM.g({transform:this.props.transform},r,t)}}));t.exports=a},{"./FlatO.react":64,"_external/lodash":61,"_external/react":62}],68:[function(e,t,r){"use strict";var n=e("_external/react"),o=(e("_external/lodash"),n.createClass({displayName:"HorizontalBeam",render:function(){var e=this.props.thickness/2;return n.DOM.rect({x:this.props.x-e,y:this.props.y-e,width:this.props.width+this.props.thickness,height:this.props.thickness,className:"plane-horizontal-beam"})}})),a=n.createClass({displayName:"VerticalBeam",render:function(){var e=this.props.thickness/2;return n.DOM.rect({x:this.props.x-e,y:this.props.y-e,width:this.props.thickness,height:this.props.height+this.props.thickness,className:"plane-vertical-beam"})}}),s=n.createClass({displayName:"FlatPlane",render:function(){for(var e=[],t=0;5>t;t+=1){var r=n.createElement(o,{key:"h"+t,x:-2,y:t-2,width:4,thickness:.1}),s=n.createElement(a,{key:"v"+t,x:t-2,y:-2,height:4,thickness:.1});e.push(r),e.push(s)}return n.DOM.g({className:this.props.className,transform:this.props.transform},e)}}),i=n.createClass({displayName:"Plane",render:function(){var e=.05,t=this.props.skew||0,r=n.createElement(s,{className:"plane-top",transform:"skewX("+t+")"}),o=n.createElement(s,{className:"plane-bottom",transform:"translate(0,"+e+"),skewX("+t+")"});return n.DOM.g({transform:this.props.transform},o,r)}});t.exports=i},{"_external/lodash":61,"_external/react":62}],69:[function(e,t,r){"use strict";var n=e("_external/react"),o=e("./GameBoard.react"),a=n.createClass({displayName:"Playfield",render:function(){var e=this.props.sceneFrameProperties,t=n.createElement(o,{t:this.props.t,skew:e.skew,boardState:this.props.boardState,onClickSquare:this.props.onClickSquare}),r=n.DOM.g({transform:"translate(300,600),scale(40)"},t);return r}});t.exports=a},{"./GameBoard.react":66,"_external/react":62}],70:[function(e,t,r){"use strict";var n=e("_external/react"),o=e("./Playfield.react"),a=e("./Chrome.react"),s=n.createClass({displayName:"SceneFrame",render:function(){var e=this.props.sceneFrameProperties,t=this.props.playerTurn,r=n.DOM.rect({className:"backdrop",x:0,y:0,width:1e5,height:1e5}),s=n.createElement(o,{sceneFrameProperties:e,t:this.props.t,boardState:this.props.boardState,onClickSquare:this.props.onClickSquare}),i=n.createElement(a,{playerTurn:t,transform:"translate(690,400)",sceneFrameProperties:e});return n.DOM.g(null,r,s,i)}});t.exports=s},{"./Chrome.react":63,"./Playfield.react":69,"_external/react":62}],71:[function(e,t,r){"use strict";var n=e("_external/react"),o=e("./FlatX.react"),a=(e("_external/lodash"),n.createClass({displayName:"XPiece",render:function(){var e=.05,t=n.DOM.rect({width:.34,x:-.67,y:-.5,height:e,className:"x-piece-side"}),r=n.DOM.rect({width:.34,x:.33,y:-.5,height:e,className:"x-piece-side"}),a=n.DOM.rect({width:.34,x:-.67,y:.5,height:e,className:"x-piece-bottom"}),s=n.DOM.rect({width:.34,x:.33,y:.5,height:e,className:"x-piece-bottom"}),i=n.createElement(o,{className:"x-piece-front",transform:"skewX(0)"}),c=n.createElement(o,{className:"x-piece-side",transform:"translate(0,"+e+"),skewX(0)"});return n.DOM.g({transform:this.props.transform},c,t,r,a,s,i)}}));t.exports=a},{"./FlatX.react":65,"_external/lodash":61,"_external/react":62}],72:[function(e,t,r){"use strict";t.exports={xPieceScale:.86,oPieceScale:1}},{}],73:[function(e,t,r){"use strict";t.exports={SPAWNING:1,HIGHLIGHTED:2,FLASHING:3}},{}],74:[function(e,t,r){"use strict";function n(e){this.data=e||new Int32Array(4)}var o=e("_external/lodash");n.prototype.getPlayerAt=function(e){var t=32>e?this.data[0]:this.data[1],r=32>e?e:e-32,n=t>>>r&1;if(!n)return 0;var o=32>e?this.data[2]:this.data[3];return n=o>>>r&1,n?1:-1},n.prototype.setPlayerAt=function(e,t){var r=this.data;if(32>e){var o=r[0],a=r[2],s=e,i=1<<s;o|=i,t>0?a|=i:a&=~i;var c=new Int32Array(4);return c[0]=o,c[1]=r[1],c[2]=a,c[3]=r[3],new n(c)}var o=r[1],a=r[3],s=e-32,i=1<<s;o|=i,t>0?a|=i:a&=~i;var c=new Int32Array(4);return c[0]=r[0],c[1]=o,c[2]=r[2],c[3]=a,new n(c)},n.prototype.isSquareEmpty=function(e){var t=32>e?this.data[0]:this.data[1],r=32>e?e:e-32,n=t>>>r&1;return!n},n.prototype.getOccupiedSquareCount=function(){for(var e=0,t=this.data[0],r=this.data[1],n=0;32>n;n+=1)e+=(1&t)+(1&r),t>>>=1,r>>>=1;return e},n.prototype.getDebugString=function(){for(var e=[],t=0;64>t;t+=1){var r=this.getPlayerAt(t);e.push(r>0?"x":0>r?"o":"-")}return e.join("")},n.emptyBoard=new n,n.readFromString=function(e){var t=new n,r=e&&e.length||0;r>64&&(r=64);for(var o=0;r>o;o+=1){var a=e.charAt(o);"x"===a||"X"===a?t=t.setPlayerAt(o,1):("o"===a||"O"===a)&&(t=t.setPlayerAt(o,-1))}return t},n.generateRandom=function(e){var t=o.shuffle(o.range(0,63)),r=new n;e>32&&(e=32);for(var a=1,s=0;e>0;)r=r.setPlayerAt(t[s],a),e-=1,s+=1,a=-a;return r},t.exports=n},{"_external/lodash":61}],75:[function(e,t,r){"use strict";function n(e){this.stepsPerTick=e.stepsPerTick||l,this.playerIndex=e.playerIndex||-1,this.delayBetweenTicks=a.isUndefined(e.delayBetweenTicks)?p:e.delayBetweenTicks,this.squarePrefs=s()}var o=e("babel-runtime/core-js/promise")["default"],a=e("_external/lodash"),s=e("./generateSquarePreferences"),i=(e("./PrincipalVariation"),e("./MoveComputation")),c=(e("./GameState"),e("./Ply")),u=e("./MoveResponse"),l=2e4,p=1;n.prototype.makeMove=function(e,t){var r=this,n=this,a=!1,s=(new Date).getTime();t=t||this.playerIndex;var l=new o(function(o,l){function p(e){var t=(new Date).getTime(),r=new u({square:e,timeTaken:t-s,interrupted:a});o(r)}var h=e.getOccupiedSquareCount();if(1>h)return void p(n.squarePrefs[0]);var f=void 0;f=8>h?4:32>h?5:6;var m=new i({plyClass:c,maxDepth:f,player:t,gameState:e,squarePrefs:r.squarePrefs}),d=function y(){if(m.execute(n.stepsPerTick),a&&(m.done=!0),m.done){var e=m.getBestMove();console.log("pv:"),console.log(m.pv.debugGetLine()),p(e)}else setTimeout(y,n.delayBetweenTicks)};d()});return{interrupt:function(){a=!0},result:l}},n.prototype.isComputerPlayer=!0,t.exports=n},{"./GameState":77,"./MoveComputation":80,"./MoveResponse":81,"./Ply":84,"./PrincipalVariation":85,"./generateSquarePreferences":88,"_external/lodash":61,"babel-runtime/core-js/promise":2}],76:[function(e,t,r){"use strict";function n(e){this.player1=e.player1,this.player2=e.player2,this.onStateChange=e.onStateChange,this.metaState=e.metaState||new s}function o(e,t){e.metaState=t,e.onStateChange&&e.onStateChange(t)}function a(e,t){var r=t.gameState;return console.log(r),console.log(r.getSolutionScoreSummary()),r.gameOver?(console.log("GAME OVER"),t=t.set("phase",i.GAME_OVER),void o(e,t)):(t=t.flipPlayerTurn(),void setTimeout(function(){e.metaState=t,c(e)}))}var s=(e("_external/lodash"),e("_external/Immutable"),e("./GameState"),e("./MetaGameState")),i=e("./phaseCodes"),c=void 0;c=function(e){var t=e.metaState,r=t.playerTurn,n=r>0?e.player1:e.player2;n&&n.isComputerPlayer?!function(){t=t.set("phase",i.THINKING),o(e,t);var s=t.gameState,c=n.makeMove(s,r);e._interrupt=c.interrupt?c.interrupt:null,c.result.then(function(n){console.log(n);var o=s.placePiece(n.square,r);t=t.set("lastMove",n.square).set("gameState",o),setTimeout(function(){return a(e,t)})})}():(t=t.set("phase",i.WAITING_FOR_HUMAN),o(e,t))},n.prototype.start=function(){var e=this.metaState;e.isGameStarted||c(this)},n.prototype.interrupt=function(){this._interrupt&&this._interrupt()},n.prototype.submitMove=function(e){var t=this,r=this.metaState;if(r.isWaitingForHuman){var n=r.gameState;if(n.isLegalMove(e)){var o=r.playerTurn,s=n.placePiece(e,o);r=r.set("lastMove",e).set("gameState",s),setTimeout(function(){return a(t,r)})}}},t.exports=n},{"./GameState":77,"./MetaGameState":79,"./phaseCodes":90,"_external/Immutable":59,"_external/lodash":61}],77:[function(e,t,r){"use strict";function n(e){this.balance=e.balance,this.solutionScores=e.solutionScores,this.winner=e.winner,this.gameOver=0!==e.winner,this.contents=e.contents||i.emptyBoard}{var o=e("_external/Immutable"),a=e("./solutionMap"),s=e("./solutionStates"),i=e("./BoardContents"),c=o.List(o.Repeat(s.empty,a.solutionCount));a.solutionCount*s.emptyValue}n.prototype.placePiece=function(e,t){for(var r=a.getSolutionsForSquare(e),o=this.balance,s=-t,i=this.solutionScores,c=this.winner,u=this.contents.setPlayerAt(e,t),l=r.length,p=0;l>p;p+=1){var h=r[p],f=i.get(h);o-=t*f.score(t),o-=s*f.score(s);var m=f.play(t);o+=t*m.score(t),o+=s*m.score(s),m.isWinFor(t)&&(c=t),i=i.set(h,m)}return new n({contents:u,solutionScores:i,balance:o,winner:c})},n.prototype.isSquareOccupied=function(e){return!this.contents.isSquareEmpty(e)},n.prototype.isSquareEmpty=function(e){return this.contents.isSquareEmpty(e)},n.prototype.isLegalMove=n.prototype.isSquareEmpty,n.prototype.getPlayerAt=function(e){return this.contents.getPlayerAt(e)},n.prototype.getOccupiedSquareCount=function(){return this.contents.getOccupiedSquareCount()},n.prototype.getOccupiedSquares=function(){for(var e=[],t=0;64>t;t+=1)this.contents.isSquareEmpty(t)||e.push(t);return e},n.prototype.getWinningSquares=function(){if(this._winningSquares)return this._winningSquares;var e=o.Set();return this.solutionScores.forEach(function(t,r){if(t.isWin){var n=a.solutions.get(r),o=n.squares;o.forEach(function(t){return e=e.add(t)})}}),this._winningSquares=e,e},n.prototype.getSolutionScoreSummary=function(){var e={};return this.solutionScores.forEach(function(t){t.description;if(t.description){var r=e[t.description]||0;e[t.description]=r+1}}),e};var u=new n({contents:i.emptyBoard,solutionScores:c,balance:0,winner:0});n.defaultGameState=u,t.exports=n},{"./BoardContents":74,"./solutionMap":92,"./solutionStates":93,"_external/Immutable":59}],78:[function(e,t,r){"use strict";function n(e){this.host=e.host,this.sceneFrameProperties=e.sceneFrameProperties||s.defaultProperties,this.playerTurn=0,this.boardState=i.emptyBoard}var o=(e("_external/lodash"),e("_external/react")),a=(e("_external/Immutable"),e("../components/SceneFrame.react")),s=e("./SceneFrameProperties"),i=e("./PhysicalBoardState"),c=e("./getPhysicalState"),u=e("./Game"),l=e("./ComputerPlayer");

n.prototype.handleMetaGameStateChange=function(e){var t=c({humanCanMove:e.isWaitingForHuman,lastMove:e.lastMove},e.gameState);console.log(e.gameState.balance),this.boardState=t,this.playerTurn=e.playerTurn,this.invalidate()},n.prototype.handleSquareClicked=function(e){if(console.log("square clicked:"),console.log(e),this.game){var t=16*e.planeIndex+4*e.rowIndex+e.colIndex;this.game.submitMove(t)}},n.prototype.handleAnimationFrame=function(e){var t=o.createElement(a,{sceneFrameProperties:this.sceneFrameProperties,t:e,playerTurn:this.playerTurn,boardState:this.boardState,onClickSquare:this.handleSquareClicked.bind(this)});o.render(t,this.host),this.boardState.isAnimating&&this.invalidate()},n.prototype.invalidate=function(){this.running&&(this.updateLevel>0?this.dirty=!0:window.requestAnimationFrame(this.handleAnimationFrame.bind(this)))},n.prototype.run=function(){this.running=!0,this.invalidate()},n.prototype.stop=function(){this.running=!1},n.prototype.beginUpdate=function(){this.updateLevel+=1},n.prototype.endUpdate=function(){if(this.updateLevel-=1,0===this.updateLevel)this.dirty&&(this.dirty=!1,this.invalidate());else if(this.updateLevel<0)throw new Error("each call to endUpdate must match a call to beginUpdate")},n.prototype.runSandboxGame=function(){var e=null,t=new l({playerIndex:-1}),r=new u({player1:e,player2:t,onStateChange:this.handleMetaGameStateChange.bind(this)});this.game=r,r.start()},t.exports=n},{"../components/SceneFrame.react":70,"./ComputerPlayer":75,"./Game":76,"./PhysicalBoardState":82,"./SceneFrameProperties":86,"./getPhysicalState":89,"_external/Immutable":59,"_external/lodash":61,"_external/react":62}],79:[function(e,t,r){"use strict";var n=(e("_external/lodash"),e("_external/Immutable")),o=e("./GameState"),a=e("./phaseCodes"),s=e("./players"),i=n.Record({gameState:o.defaultGameState,phase:a.INIT,lastMove:-1,playerTurn:s.X});i.prototype.flipPlayerTurn=function(){var e=this.playerTurn;return this.set("playerTurn",s.opposite(e))},Object.defineProperty(i.prototype,"isThinking",{get:function(){return this.phase===a.THINKING},enumerable:!0}),Object.defineProperty(i.prototype,"isWaitingForHuman",{get:function(){return this.phase===a.WAITING_FOR_HUMAN},enumerable:!0}),Object.defineProperty(i.prototype,"isGameOver",{get:function(){return this.phase===a.GAME_OVER},enumerable:!0}),Object.defineProperty(i.prototype,"isGameStarted",{get:function(){return this.phase!==a.INIT},enumerable:!0}),t.exports=i},{"./GameState":77,"./phaseCodes":90,"./players":91,"_external/Immutable":59,"_external/lodash":61}],80:[function(e,t,r){"use strict";function n(e){this.plyClass=e.plyClass,this.maxDepth=e.maxDepth||4,this.gameState=e.gameState,this.player=e.player,this.squarePrefs=e.squarePrefs,this.pv=new o(this.maxDepth),this.iteration=0,this.stack=null,this.done=!1,this.alphaCutoffCount=0,this.betaCutoffCount=0}var o=e("./PrincipalVariation");n.prototype.getBestMove=function(){return this.pv.getBestMove()},n.prototype.answer=function(){return null},n.prototype.process=function(){if(this.done)return!0;var e=this.plyClass;if(!this.stack){if(!(this.iteration<this.maxDepth))return this.done=!0,!0;this.iteration+=1,this.stack=new e({root:!0,player:this.player,host:this,gameState:this.gameState,depth:this.iteration-1})}return this.stack=this.stack.process(),this.done},n.prototype.execute=function(e){for(e=e||1;e>0&&!this.done;)this.process(),e-=1;return this.done},t.exports=n},{"./PrincipalVariation":85}],81:[function(e,t,r){"use strict";function n(e){this.square=e.square,this.interrupted=!!e.interrupted,this.timeTaken=e.timeTaken}t.exports=n},{}],82:[function(e,t,r){"use strict";function n(e){return!1==this instanceof n?new n(e):void(this._squares=e&&e.squares?e.squares:l)}function o(e){if(e>=0&&3>=e)return e;throw new Error("dimension out of range: "+e)}function a(e,t,r){return 16*o(e)+4*o(t)+o(r)}var s=e("_external/Immutable"),i=e("_external/lodash"),c=e("./PhysicalSquareState"),u=c.defaultState,l=s.Map();n.prototype.withNewSquares=function(e){return new n({squares:e})},n.prototype.getSquare=function(e,t,r){var n=a(e,t,r),o=this._squares.get(n);return o?o:u},n.prototype.updateSquare=function(e,t,r,n){var o=a(e,t,r),i=this._squares.get(o);if(i){var c=n(i);return c?s.is(c,u)?this.withNewSquares(this._squares.remove(o)):s.is(c,i)?this:this.withNewSquares(this._squares.set(o,c)):this.withNewSquares(this._squares.remove(o))}var c=n(u);return c&&!s.is(c,u)?this.withNewSquares(this._squares.set(o,c)):this},Object.defineProperty(n.prototype,"isAnimating",{get:function(){var e=this._isAnimating;return i.isUndefined(e)&&(e=this._squares.some(function(e){return e.isAnimating}),this._isAnimating=e),e}}),n.readFromString=function(e){var t=e&&e.length||0;t>64&&(t=64);for(var r=l,o=0;t>o;o+=1){var a=e.charAt(o);"x"===a||"X"===a?r=r.set(o,c.xPiece):("o"===a||"O"===a)&&(r=r.set(o,c.oPiece))}return new n({squares:r})},n.prototype.writeToString=function(){for(var e=[],t=0;64>t;t+=1){var r=this._squares.get(t),n=(r||u).pieceType;e.push(1===n?"x":2===n?"o":".")}return e.join("")},n.emptyBoard=new n,n.baseSquareMap=l,t.exports=n},{"./PhysicalSquareState":83,"_external/Immutable":59,"_external/lodash":61}],83:[function(e,t,r){"use strict";var n=e("_external/Immutable"),o=e("./AnimStates"),a=n.Record({pieceType:0,clickable:!0,animState:null,animPhaseOffset:0});Object.defineProperty(a.prototype,"isXPiece",{get:function(){return this.pieceType>0},enumerable:!0}),Object.defineProperty(a.prototype,"isOPiece",{get:function(){return this.pieceType<0},enumerable:!0}),Object.defineProperty(a.prototype,"isOccupied",{get:function(){return 0!==this.pieceType},enumerable:!0}),Object.defineProperty(a.prototype,"isAnimating",{get:function(){return this.animState===o.FLASHING},enumerable:!0});var s=new a;a.defaultState=s,a.clickableEmpty=s,a.nonClickableEmpty=s.set("clickable",!1),a.xPiece=new a({pieceType:1,clickable:!1}),a.oPiece=new a({pieceType:-1,clickable:!1}),a.playerPiece=function(e){return e>0?a.xPiece:0>e?a.oPiece:a.defaultState},t.exports=a},{"./AnimStates":73,"_external/Immutable":59}],84:[function(e,t,r){"use strict";function n(e,t,r,n){var o=[],a=t.length;if(n>=0&&e.isSquareEmpty(n)){o.push(n);for(var s=0;a>s;s+=1){var i=t[s];i!==n&&e.isSquareEmpty(i)&&o.push(i)}}else for(var s=0;a>s;s+=1){var i=t[s];e.isSquareEmpty(i)&&o.push(i)}return o}function o(e){var t=e.host,r=t.pv,o=t.squarePrefs,a=!!e.root,s=a||!!e.left;this.root=a,this.left=s,this.player=e.player,this.host=t;var i=-1;s&&(i=r.getBestMove(e.ply)),this.depth=e.depth,this.gameState=e.gameState,this.moves=n(e.gameState,o,this.player,i),this.moveCount=this.moves.length,this.nextMovePtr=0,a?(this.alpha=Number.NEGATIVE_INFINITY,this.beta=Number.POSITIVE_INFINITY,this.parent=t,this.ply=0):(this.alpha=e.alpha,this.beta=e.beta,this.parent=e.parent,this.ply=e.ply)}o.prototype.process=function(){if(this.nextMovePtr>=this.moveCount)return this.parent.answer(this.alpha);var e=this.moves[this.nextMovePtr];this.lastMove=e,this.nextMovePtr+=1;var t=this.gameState.placePiece(e,this.player);if(t.gameOver||this.depth<=0){var r=this.player*t.balance;return r>=this.beta?(this.host.betaCutoffCount+=1,this.parent.answer(this.beta)):(r>this.alpha&&(this.alpha=r,this.host.alphaCutoffCount+=1,this.host.pv.updateBestMove(this.ply,e)),this)}var n=new o({host:this.host,parent:this,gameState:t,left:this.left&&1===this.nextMovePtr,depth:this.depth-1,ply:this.ply+1,player:-this.player,alpha:-this.beta,beta:-this.alpha});return n.process()},o.prototype.answer=function(e){return e=-e,e>=this.beta?this.parent.answer(this.beta):(e>this.alpha&&(this.alpha=e,this.host.pv.updateBestMove(this.ply,this.lastMove)),this)},t.exports=o},{}],85:[function(e,t,r){"use strict";function n(e){this.depth=e;for(var t=e*e,r=new Array(t),n=0;t>n;n+=1)r[n]=-1;this.line=r}n.prototype.getBestMove=function(e){return e=e||0,this.line[e]},n.prototype.updateBestMove=function(e,t){var r=e*this.depth;if(this.line[r]=t,e<this.depth-1)for(var n=r+1,o=r+this.depth,a=this.depth-e-1;a>0;)this.line[n]=this.line[o],o+=1,n+=1,a-=1},n.prototype.debugGetLine=function(){return this.line.slice(0,this.depth)},t.exports=n},{}],86:[function(e,t,r){"use strict";var n=e("_external/Immutable"),o=n.Record({width:800,height:800,chromeWidth:200,chromeMargin:10,skew:-30});o.defaultProperties=new o,t.exports=o},{"_external/Immutable":59}],87:[function(e,t,r){"use strict";function n(e,t,r,n){this.squares=o.List([e,t,r,n])}var o=e("_external/Immutable");t.exports=n},{"_external/Immutable":59}],88:[function(e,t,r){"use strict";function n(e,t,r,n){for(var o=0;2>o;o+=1)for(var a=t[o],s=0;2>s;s+=1)for(var i=r[s],c=0;2>c;c+=1){var u=n[c];e.push(16*u+4*i+a)}}function o(){var e=a.shuffle(c),t=a.shuffle(u),r=e.concat(t);return r}var a=e("_external/lodash"),s=[0,3],i=[1,2],c=function(){var e=[];return n(e,i,i,i),n(e,s,s,s),e}(),u=function(){var e=[];return n(e,i,i,s),n(e,i,s,i),n(e,s,i,i),n(e,s,s,i),n(e,s,i,s),n(e,s,i,i),e}();t.exports=o},{"_external/lodash":61}],89:[function(e,t,r){"use strict";function n(e,t){for(var r=e&&e.humanCanMove,n=e.lastMove||-1,i=t.getWinningSquares(),c=r?a.clickableEmpty:a.nonClickableEmpty,u=o.baseSquareMap,l=0;64>l;l+=1){var p=t.getPlayerAt(l),h=void 0;p?(h=a.playerPiece(p),i.has(l)?h=h.set("animState",s.FLASHING):l===n&&(h=h.set("animState",s.HIGHLIGHTED))):h=c,u=u.set(l,h)}return new o({squares:u})}var o=e("./PhysicalBoardState"),a=e("./PhysicalSquareState"),s=e("./AnimStates");t.exports=n},{"./AnimStates":73,"./PhysicalBoardState":82,"./PhysicalSquareState":83}],90:[function(e,t,r){"use strict";t.exports={INIT:0,WAITING_FOR_HUMAN:1,THINKING:2,GAME_OVER:3}},{}],91:[function(e,t,r){"use strict";function n(e){return e>0?-1:1}function o(e){return e>0?"X":0>e?"O":"-"}var a=1,s=-1;t.exports={X:a,O:s,opposite:n,pieceName:o}},{}],92:[function(e,t,r){"use strict";function n(){}function o(){function e(e,t){var r=o[e];r.push(t)}function t(t,r,n,o){var a=new i(t,r,n,o);c=c.push(a),e(t,u),e(r,u),e(n,u),e(o,u),u+=1}function r(e,r){var n=e+r,o=n+r,a=o+r;t(e,n,o,a)}for(var o=[],c=s.List(),u=0,l=0;64>l;l+=1)o[l]=[];for(var l=0;4>l;l+=1){for(var p=16*l,h=0;4>h;h+=1)r(p+4*h,1),r(p+h,4),r(4*l+h,16);r(p,5),r(p+3,3),r(4*l,17),r(4*l+3,15),r(l,20),r(12+l,12)}r(0,21),r(3,19),r(12,13),r(15,11),a(o);var f=new n;return f._solutions=c,f._squares=o,f}var a=e("babel-runtime/core-js/object/freeze")["default"],s=e("_external/Immutable"),i=e("./Solution");n.prototype.getSolutionsForSquare=function(e){return this._squares[e]},n.prototype.getSquaresForSolution=function(e){var t=this._solutions.get(e);return t.squares},Object.defineProperty(n.prototype,"solutions",{get:function(){return this._solutions},enumerable:!0}),Object.defineProperty(n.prototype,"solutionCount",{get:function(){return this._solutions.size},enumerable:!0}),t.exports=o()},{"./Solution":87,"_external/Immutable":59,"babel-runtime/core-js/object/freeze":1}],93:[function(e,t,r){"use strict";function n(e){return this.playerIndex===e}function o(e){this.playerIndex=e,this.description=s.pieceName(e)+" win"}function a(e,t,r,n){this.playerIndex=e,this._score=t,this.nextState=r,this.description=n}var s=e("./players"),i=1e5,c=1e3,u=5,l=2,p=1,h=0,f={play:function(){return this},score:function(){return h},isWinFor:function(){return!1},canWin:function(){return!1},isWin:!1};o.prototype.play=function(){return this},o.prototype.score=function(e){return e===this.playerIndex?i:0},o.prototype.isWinFor=n,o.prototype.canWin=n,o.prototype.isWin=!0,a.prototype.play=function(e){return e===this.playerIndex?this.nextState:f},a.prototype.score=function(e){return e===this.playerIndex?this._score:0},a.prototype.isWinFor=function(){return!1},a.prototype.isWin=!1,a.prototype.canWin=n;var m=new o(s.X),d=new a(s.X,c,m,"XXX"),y=new a(s.X,u,d,"XX"),v=new a(s.X,l,y,"X"),x=new o(s.O),g=new a(s.O,c,x,"OOO"),S=new a(s.O,u,g,"OO"),b=new a(s.O,l,S,"O"),$={play:function(e){return e===s.X?v:b},score:function(){return p},isWinFor:function(){return!1},canWin:function(){return!0},isWin:!1};t.exports={empty:$,x1:v,x2:y,x3:d,xWin:m,o1:b,o2:S,o3:g,oWin:x,stalemate:f,emptyValue:p}},{"./players":91}],94:[function(e,t,r){"use strict";function n(){var e=document.getElementById("game-container"),t=new a({host:e});t.run(),t.runSandboxGame()}{var o=(e("_external/react"),e("_external/lodash"),e("_external/Immutable"),e("_external/jquery")),a=e("./core/MainDriver");e("sandbox/sandbox1")}o(document).ready(n)},{"./core/MainDriver":78,"_external/Immutable":59,"_external/jquery":60,"_external/lodash":61,"_external/react":62,"sandbox/sandbox1":95}],95:[function(e,t,r){"use strict";function n(){console.log("in sandbox 1");var e=document.getElementById("game-container"),t=u.readFromString("xo..xxooxox..xx.xx.oooo.xo..o.o.ooxo.oxo.oo..x.xx.xxx.xx.xoxx.x."),r=(o.createElement(a,{transform:"skewX(-30)"}),o.createElement(s,{transform:"translate(1.5,0),skewX(-30)"}),o.createElement(i,{transform:"skewX(0)"}),o.createElement(c,{skew:-30,boardState:t,onClickSquare:function(e){console.log("square clicked:"),console.log(e)}})),n=(o.DOM.rect({className:"backdrop",x:0,y:0,width:1e5,height:1e5}),o.createElement("g",{transform:"translate(400,600),scale(40)"},r),o.createElement(h,{transform:"translate(690,400)"}),m.defaultProperties),l=o.createElement(f,{sceneFrameProperties:n,boardState:t,onClickSquare:function(e){console.log("square clicked:"),console.log(e)}});o.render(l,e),d.test2()}var o=e("_external/react"),a=(e("_external/lodash"),e("_external/Immutable"),e("../components/XPiece.react")),s=e("../components/OPiece.react"),i=e("../components/Plane.react"),c=e("../components/GameBoard.react"),u=e("../core/PhysicalBoardState"),l=(e("../core/solutionMap"),e("../core/GameState")),p=e("../core/ComputerPlayer"),h=(e("../core/generateSquarePreferences"),e("../core/BoardContents"),e("../components/Chrome.react")),f=e("../components/SceneFrame.react"),m=e("../core/SceneFrameProperties"),d=function(){function e(){function e(e){if(console.log(e.contents.getDebugString()),e.gameOver){var t=e.getWinningSquares();console.log(t.toJS())}}function t(o,a){var s=o?r:n;return console.log(s),a.gameOver?(console.log("game over"),void e(a)):void s.makeMove(a).result.then(function(r){console.log(r);var n=a.placePiece(r.square,s.playerIndex);e(n),setTimeout(function(){t(!o,n)})})}var r=new p({playerIndex:1}),n=new p({playerIndex:-1});t(!0,l.defaultGameState)}return{test2:e}}();t.exports=n},{"../components/Chrome.react":63,"../components/GameBoard.react":66,"../components/OPiece.react":67,"../components/Plane.react":68,"../components/SceneFrame.react":70,"../components/XPiece.react":71,"../core/BoardContents":74,"../core/ComputerPlayer":75,"../core/GameState":77,"../core/PhysicalBoardState":82,"../core/SceneFrameProperties":86,"../core/generateSquarePreferences":88,"../core/solutionMap":92,"_external/Immutable":59,"_external/lodash":61,"_external/react":62}]},{},[94]);