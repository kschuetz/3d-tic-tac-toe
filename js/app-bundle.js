!function e(t,r,n){function a(s,i){if(!r[s]){if(!t[s]){var c="function"==typeof require&&require;if(!i&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return a(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/freeze"),__esModule:!0}},{"core-js/library/fn/object/freeze":3}],2:[function(e,t,r){t.exports={"default":e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":4}],3:[function(e,t,r){e("../../modules/es6.object.freeze"),t.exports=e("../../modules/$.core").Object.freeze},{"../../modules/$.core":9,"../../modules/es6.object.freeze":54}],4:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/$.core").Promise},{"../modules/$.core":9,"../modules/es6.object.to-string":55,"../modules/es6.promise":56,"../modules/es6.string.iterator":57,"../modules/web.dom.iterable":58}],5:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],6:[function(e,t,r){var n=e("./$.is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./$.is-object":23}],7:[function(e,t,r){var n=e("./$.cof"),a=e("./$.wks")("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=(t=Object(e))[a])?r:o?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},{"./$.cof":8,"./$.wks":51}],8:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],9:[function(e,t,r){var n=t.exports={};"number"==typeof __e&&(__e=n)},{}],10:[function(e,t,r){var n=e("./$.a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":5}],11:[function(e,t,r){var n=e("./$.global"),a=e("./$.core"),o="prototype",s=function(e,t){return function(){return e.apply(t,arguments)}},i=function(e,t,r){var c,u,l,p,h=e&i.G,f=e&i.P,m=h?n:e&i.S?n[t]:(n[t]||{})[o],d=h?a:a[t]||(a[t]={});h&&(r=t);for(c in r)u=!(e&i.F)&&m&&c in m,u&&c in d||(l=u?m[c]:r[c],h&&"function"!=typeof m[c]?p=r[c]:e&i.B&&u?p=s(l,n):e&i.W&&m[c]==l?!function(e){p=function(t){return this instanceof e?new e(t):e(t)},p[o]=e[o]}(l):p=f&&"function"==typeof l?s(Function.call,l):l,d[c]=p,f&&((d[o]||(d[o]={}))[c]=l))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,t.exports=i},{"./$.core":9,"./$.global":16}],12:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],13:[function(e,t,r){var n=e("./$.is-object"),a=e("./$.global").document,o=n(a)&&n(a.createElement);t.exports=function(e){return o?a.createElement(e):{}}},{"./$.global":16,"./$.is-object":23}],14:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],15:[function(e,t,r){var n=e("./$.ctx"),a=e("./$.iter-call"),o=e("./$.is-array-iter"),s=e("./$.an-object"),i=e("./$.to-length"),c=e("./core.get-iterator-method");t.exports=function(e,t,r,u){var l,p,h,f=c(e),m=n(r,u,t?2:1),d=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(o(f))for(l=i(e.length);l>d;d++)t?m(s(p=e[d])[0],p[1]):m(e[d]);else for(h=f.call(e);!(p=h.next()).done;)a(h,m,p.value,t)}},{"./$.an-object":6,"./$.ctx":10,"./$.is-array-iter":22,"./$.iter-call":25,"./$.to-length":48,"./core.get-iterator-method":52}],16:[function(e,t,r){var n="undefined"!=typeof self&&self.Math==Math?self:Function("return this")();t.exports=n,"number"==typeof __g&&(__g=n)},{}],17:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],18:[function(e,t,r){var n=e("./$"),a=e("./$.property-desc");t.exports=e("./$.support-desc")?function(e,t,r){return n.setDesc(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},{"./$":31,"./$.property-desc":35,"./$.support-desc":43}],19:[function(e,t,r){t.exports=e("./$.global").document&&document.documentElement},{"./$.global":16}],20:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],21:[function(e,t,r){var n=e("./$.cof");t.exports=0 in Object("z")?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./$.cof":8}],22:[function(e,t,r){var n=e("./$.iterators"),a=e("./$.wks")("iterator");t.exports=function(e){return(n.Array||Array.prototype[a])===e}},{"./$.iterators":30,"./$.wks":51}],23:[function(e,t,r){t.exports=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}},{}],24:[function(e,t,r){t.exports="keys"in[]&&!("next"in[].keys())},{}],25:[function(e,t,r){var n=e("./$.an-object");t.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(o){var s=e["return"];throw void 0!==s&&n(s.call(e)),o}}},{"./$.an-object":6}],26:[function(e,t,r){"use strict";var n=e("./$"),a={};e("./$.hide")(a,e("./$.wks")("iterator"),function(){return this}),t.exports=function(t,r,o){t.prototype=n.create(a,{next:e("./$.property-desc")(1,o)}),e("./$.tag")(t,r+" Iterator")}},{"./$":31,"./$.hide":18,"./$.property-desc":35,"./$.tag":44,"./$.wks":51}],27:[function(e,t,r){"use strict";var n=e("./$.library"),a=e("./$.def"),o=e("./$.redef"),s=e("./$.hide"),i=e("./$.has"),c=e("./$.wks")("iterator"),u=e("./$.iterators"),l="@@iterator",p="keys",h="values",f=function(){return this};t.exports=function(t,r,m,d,y,v,x){e("./$.iter-create")(m,r,d);var g,b,S=function(e){switch(e){case p:return function(){return new m(this,e)};case h:return function(){return new m(this,e)}}return function(){return new m(this,e)}},$=r+" Iterator",w=t.prototype,_=w[c]||w[l]||y&&w[y],P=_||S(y);if(_){var k=e("./$").getProto(P.call(new t));e("./$.tag")(k,$,!0),!n&&i(w,l)&&s(k,c,f)}if((!n||x)&&s(w,c,P),u[r]=P,u[$]=f,y)if(g={keys:v?P:S(p),values:y==h?P:S(h),entries:y!=h?P:S("entries")},x)for(b in g)b in w||o(w,b,g[b]);else a(a.P+a.F*e("./$.iter-buggy"),r,g)}},{"./$":31,"./$.def":11,"./$.has":17,"./$.hide":18,"./$.iter-buggy":24,"./$.iter-create":26,"./$.iterators":30,"./$.library":32,"./$.redef":36,"./$.tag":44,"./$.wks":51}],28:[function(e,t,r){var n=e("./$.wks")("iterator"),a=!1;try{var o=[7][n]();o["return"]=function(){a=!0},Array.from(o,function(){throw 2})}catch(s){}t.exports=function(e){if(!a)return!1;var t=!1;try{var r=[7],o=r[n]();o.next=function(){t=!0},r[n]=function(){return o},e(r)}catch(s){}return t}},{"./$.wks":51}],29:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],30:[function(e,t,r){t.exports={}},{}],31:[function(e,t,r){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},{}],32:[function(e,t,r){t.exports=!0},{}],33:[function(e,t,r){var n=e("./$.redef");t.exports=function(e,t){for(var r in t)n(e,r,t[r]);return e}},{"./$.redef":36}],34:[function(e,t,r){t.exports=function(t,r){var n=e("./$.def"),a=(e("./$.core").Object||{})[t]||Object[t],o={};o[t]=r(a),n(n.S+n.F*e("./$.fails")(function(){a(1)}),"Object",o)}},{"./$.core":9,"./$.def":11,"./$.fails":14}],35:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],36:[function(e,t,r){t.exports=e("./$.hide")},{"./$.hide":18}],37:[function(e,t,r){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},{}],38:[function(e,t,r){var n=e("./$").getDesc,a=e("./$.is-object"),o=e("./$.an-object"),s=function(e,t){if(o(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r){try{r=e("./$.ctx")(Function.call,n(Object.prototype,"__proto__").set,2),r({},[])}catch(a){t=!0}return function(e,n){return s(e,n),t?e.__proto__=n:r(e,n),e}}():void 0),check:s}},{"./$":31,"./$.an-object":6,"./$.ctx":10,"./$.is-object":23}],39:[function(e,t,r){var n=e("./$.global"),a="__core-js_shared__",o=n[a]||(n[a]={});t.exports=function(e){return o[e]||(o[e]={})}},{"./$.global":16}],40:[function(e,t,r){"use strict";var n=e("./$"),a=e("./$.wks")("species");t.exports=function(t){!e("./$.support-desc")||a in t||n.setDesc(t,a,{configurable:!0,get:function(){return this}})}},{"./$":31,"./$.support-desc":43,"./$.wks":51}],41:[function(e,t,r){t.exports=function(e,t,r){if(!(e instanceof t))throw TypeError(r+": use the 'new' operator!");return e}},{}],42:[function(e,t,r){var n=e("./$.to-integer"),a=e("./$.defined");t.exports=function(e){return function(t,r){var o,s,i=String(a(t)),c=n(r),u=i.length;return 0>c||c>=u?e?"":void 0:(o=i.charCodeAt(c),55296>o||o>56319||c+1===u||(s=i.charCodeAt(c+1))<56320||s>57343?e?i.charAt(c):o:e?i.slice(c,c+2):(o-55296<<10)+(s-56320)+65536)}}},{"./$.defined":12,"./$.to-integer":46}],43:[function(e,t,r){t.exports=!e("./$.fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./$.fails":14}],44:[function(e,t,r){var n=e("./$.has"),a=e("./$.hide"),o=e("./$.wks")("toStringTag");t.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,o)&&a(e,o,t)}},{"./$.has":17,"./$.hide":18,"./$.wks":51}],45:[function(e,t,r){"use strict";var n,a,o,s=e("./$.ctx"),i=e("./$.invoke"),c=e("./$.html"),u=e("./$.dom-create"),l=e("./$.global"),p=l.process,h=l.setImmediate,f=l.clearImmediate,m=l.MessageChannel,d=0,y={},v="onreadystatechange",x=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},g=function(e){x.call(e.data)};h&&f||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++d]=function(){i("function"==typeof e?e:Function(e),t)},n(d),d},f=function(e){delete y[e]},"process"==e("./$.cof")(p)?n=function(e){p.nextTick(s(x,e,1))}:m?(a=new m,o=a.port2,a.port1.onmessage=g,n=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScript?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",g,!1)):n=v in u("script")?function(e){c.appendChild(u("script"))[v]=function(){c.removeChild(this),x.call(e)}}:function(e){setTimeout(s(x,e,1),0)}),t.exports={set:h,clear:f}},{"./$.cof":8,"./$.ctx":10,"./$.dom-create":13,"./$.global":16,"./$.html":19,"./$.invoke":20}],46:[function(e,t,r){var n=Math.ceil,a=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?a:n)(e)}},{}],47:[function(e,t,r){var n=e("./$.iobject"),a=e("./$.defined");t.exports=function(e){return n(a(e))}},{"./$.defined":12,"./$.iobject":21}],48:[function(e,t,r){var n=e("./$.to-integer"),a=Math.min;t.exports=function(e){return e>0?a(n(e),9007199254740991):0}},{"./$.to-integer":46}],49:[function(e,t,r){var n=0,a=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+a).toString(36))}},{}],50:[function(e,t,r){t.exports=function(){}},{}],51:[function(e,t,r){var n=e("./$.shared")("wks"),a=e("./$.global").Symbol;t.exports=function(t){return n[t]||(n[t]=a&&a[t]||(a||e("./$.uid"))("Symbol."+t))}},{"./$.global":16,"./$.shared":39,"./$.uid":49}],52:[function(e,t,r){var n=e("./$.classof"),a=e("./$.wks")("iterator"),o=e("./$.iterators");t.exports=e("./$.core").getIteratorMethod=function(e){return void 0!=e?e[a]||e["@@iterator"]||o[n(e)]:void 0}},{"./$.classof":7,"./$.core":9,"./$.iterators":30,"./$.wks":51}],53:[function(e,t,r){"use strict";var n=e("./$.unscope"),a=e("./$.iter-step"),o=e("./$.iterators"),s=e("./$.to-iobject");e("./$.iter-define")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,a(1)):"keys"==t?a(0,r):"values"==t?a(0,e[r]):a(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},{"./$.iter-define":27,"./$.iter-step":29,"./$.iterators":30,"./$.to-iobject":47,"./$.unscope":50}],54:[function(e,t,r){var n=e("./$.is-object");e("./$.object-sap")("freeze",function(e){return function(t){return e&&n(t)?e(t):t}})},{"./$.is-object":23,"./$.object-sap":34}],55:[function(e,t,r){},{}],56:[function(e,t,r){"use strict";var n,a=e("./$"),o=e("./$.library"),s=e("./$.global"),i=e("./$.ctx"),c=e("./$.classof"),u=e("./$.def"),l=e("./$.is-object"),p=e("./$.an-object"),h=e("./$.a-function"),f=e("./$.strict-new"),m=e("./$.for-of"),d=e("./$.set-proto").set,y=e("./$.same"),v=e("./$.species"),x=e("./$.wks")("species"),g=e("./$.uid")("record"),b="Promise",S=s.process,$="process"==c(S),w=S&&S.nextTick||e("./$.task").set,_=s[b],P=function(e){var t=new _(function(){});return e&&(t.constructor=Object),_.resolve(t)===t},k=function(){function t(e){var r=new _(e);return d(r,t.prototype),r}var r=!1;try{if(r=_&&_.resolve&&P(),d(t,_),t.prototype=a.create(_.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(r=!1),r&&e("./$.support-desc")){var n=!1;_.resolve(a.setDesc({},"then",{get:function(){n=!0}})),r=n}}catch(o){r=!1}return r}(),O=function(e){return l(e)&&(k?"Promise"==c(e):g in e)},I=function(e,t){return o&&e===_&&t===n?!0:y(e,t)},M=function(e){var t=p(e)[x];return void 0!=t?t:e},q=function(e){var t;return l(e)&&"function"==typeof(t=e.then)?t:!1},C=function(e,t){if(!e.n){e.n=!0;var r=e.c;w.call(s,function(){for(var n=e.v,a=1==e.s,o=0,i=function(t){var r,o,s=a?t.ok:t.fail;try{s?(a||(e.h=!0),r=s===!0?n:s(n),r===t.P?t.rej(TypeError("Promise-chain cycle")):(o=q(r))?o.call(r,t.res,t.rej):t.res(r)):t.rej(n)}catch(i){t.rej(i)}};r.length>o;)i(r[o++]);r.length=0,e.n=!1,t&&setTimeout(function(){w.call(s,function(){N(e.p)&&($?S.emit("unhandledRejection",n,e.p):s.console&&console.error&&console.error("Unhandled promise rejection",n)),e.a=void 0})},1)})}},N=function(e){var t,r=e[g],n=r.a||r.c,a=0;if(r.h)return!1;for(;n.length>a;)if(t=n[a++],t.fail||!N(t.P))return!1;return!0},j=function(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,t.a=t.c.slice(),C(t,!0))},E=function(e){var t,r=this;if(!r.d){r.d=!0,r=r.r||r;try{(t=q(e))?w.call(s,function(){var n={r:r,d:!1};try{t.call(e,i(E,n,1),i(j,n,1))}catch(a){j.call(n,a)}}):(r.v=e,r.s=1,C(r,!1))}catch(n){j.call({r:r,d:!1},n)}}};k||(_=function(e){h(e);var t={p:f(this,_,b),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};this[g]=t;try{e(i(E,t,1),i(j,t,1))}catch(r){j.call(t,r)}},e("./$.mix")(_.prototype,{then:function(e,t){var r=p(p(this).constructor)[x],n={ok:"function"==typeof e?e:!0,fail:"function"==typeof t?t:!1},a=n.P=new(void 0!=r?r:_)(function(e,t){n.res=h(e),n.rej=h(t)}),o=this[g];return o.c.push(n),o.a&&o.a.push(n),o.s&&C(o,!1),a},"catch":function(e){return this.then(void 0,e)}})),u(u.G+u.W+u.F*!k,{Promise:_}),e("./$.tag")(_,b),v(_),v(n=e("./$.core")[b]),u(u.S+u.F*!k,b,{reject:function(e){return new this(function(t,r){r(e)})}}),u(u.S+u.F*(!k||P(!0)),b,{resolve:function(e){return O(e)&&I(e.constructor,this)?e:new this(function(t){t(e)})}}),u(u.S+u.F*!(k&&e("./$.iter-detect")(function(e){_.all(e)["catch"](function(){})})),b,{all:function(e){var t=M(this),r=[];return new t(function(n,o){m(e,!1,r.push,r);var s=r.length,i=Array(s);s?a.each.call(r,function(e,r){t.resolve(e).then(function(e){i[r]=e,--s||n(i)},o)}):n(i)})},race:function(e){var t=M(this);return new t(function(r,n){m(e,!1,function(e){t.resolve(e).then(r,n)})})}})},{"./$":31,"./$.a-function":5,"./$.an-object":6,"./$.classof":7,"./$.core":9,"./$.ctx":10,"./$.def":11,"./$.for-of":15,"./$.global":16,"./$.is-object":23,"./$.iter-detect":28,"./$.library":32,"./$.mix":33,"./$.same":37,"./$.set-proto":38,"./$.species":40,"./$.strict-new":41,"./$.support-desc":43,"./$.tag":44,"./$.task":45,"./$.uid":49,"./$.wks":51}],57:[function(e,t,r){"use strict";var n=e("./$.string-at")(!0);e("./$.iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./$.iter-define":27,"./$.string-at":42}],58:[function(e,t,r){e("./es6.array.iterator");var n=e("./$.iterators");n.NodeList=n.HTMLCollection=n.Array},{"./$.iterators":30,"./es6.array.iterator":53}],59:[function(e,t,r){"use strict";t.exports=window.Immutable},{}],60:[function(e,t,r){"use strict";t.exports=window.jQuery},{}],61:[function(e,t,r){"use strict";t.exports=window._},{}],62:[function(e,t,r){"use strict";t.exports=window.React},{}],63:[function(e,t,r){"use strict";var n=e("_external/react"),a=e("./consts"),o=e("./FlatX.react"),s=e("./FlatO.react"),i=e("../core/players"),c=n.createClass({displayName:"ChromeBackground",render:function(){var e=this.props.width||200,t=e/2,r=this.props.height||700,a=r/2;return n.DOM.rect({className:"chrome-background",x:-t,y:-a,width:e,height:r})}}),u=n.createClass({displayName:"TurnIndicator",getDefaultProps:function(){return{stemThickness:1,scale:1}},render:function(){var e=this.props.scale,t=this.props.stemThickness*e,r=t/2;return n.DOM.polygon({className:"turn-indicator",points:"0,-"+e+" "+e+",0 0,"+e+" 0,"+r+" -"+e+","+r+" -"+e+",-"+r+", 0,-"+r,transform:this.props.transform})}}),l=n.createClass({displayName:"PlayerRow",getDefaultProps:function(){return{width:180,height:60}},render:function(){var e=this.props.player===i.O,t=this.props.isPlayerTurn,r=this.props.width,c=this.props.height,l=r/2,p=c/2,h=e?s:o,f=e?"chrome-icon-o":"chrome-icon-x",m=n.DOM.rect({className:"chrome-player-row",x:-l,y:-p,width:r,height:c}),d=c/2-10,y=d-l+5,v=null;t&&(v=n.createElement(u,{scale:d,transform:"translate("+y+", 0)"}));var x=e?a.oPieceScale:a.xPieceScale,g=.8*c,b=g*x,S=y+d+5+g/2,$=n.createElement(h,{className:f,transform:"translate("+S+",0),scale("+b+")"}),w=null;return n.DOM.g({transform:this.props.transform},m,$,v,w)}}),p=n.createClass({displayName:"Chrome",render:function(){var e=this.props.sceneFrameProperties,t=this.props.playerTurn,r=e.chromeWidth,a=e.chromeMargin,o=e.height-2*a,s=n.createElement(c,{width:r,height:o}),u=n.createElement(l,{player:i.X,isPlayerTurn:t===i.X,transform:"translate(0, -350)"}),p=n.createElement(l,{player:i.O,isPlayerTurn:t===i.O,transform:"translate(0, -270)"});return n.DOM.g({transform:this.props.transform},s,u,p)}});t.exports=p},{"../core/players":92,"./FlatO.react":64,"./FlatX.react":65,"./consts":72,"_external/react":62}],64:[function(e,t,r){"use strict";var n=e("_external/react"),a=(e("_external/lodash"),n.createClass({displayName:"FlatO",render:function(){return n.DOM.circle({r:.34,className:this.props.className,transform:this.props.transform,strokeWidth:.29})}}));t.exports=a},{"_external/lodash":61,"_external/react":62}],65:[function(e,t,r){"use strict";var n=e("_external/react"),a=(e("_external/lodash"),n.createClass({displayName:"XLeg",render:function(){return n.DOM.rect({x:-.17,y:-.5,width:.34,height:1,transform:this.props.transform})}})),o=n.createClass({displayName:"FlatX",render:function(){var e=n.createElement(a,{transform:"skewX(45)"}),t=n.createElement(a,{transform:"skewX(-45)"});return n.DOM.g({className:this.props.className,transform:this.props.transform,fill:this.props.fill},e,t)}});t.exports=o},{"_external/lodash":61,"_external/react":62}],66:[function(e,t,r){"use strict";var n=e("_external/react"),a=(e("_external/lodash"),e("./Plane.react")),o=e("./XPiece.react"),s=e("./OPiece.react"),i=e("../core/AnimStates"),c=.04,u=[0,Math.PI/2,Math.PI,3*Math.PI/2],l=.5,p=n.createClass({displayName:"BoardPiece",render:function(){var e=this.props.squareState,t=this.props.x,r=this.props.y,a=this.props.flashScale||1,c=this.props.scale||.7,u=e.animState;u===i.HIGHLIGHTED?c=1.3*c:u===i.FLASHING&&(c*=a);var l=void 0;if(e.isXPiece)l=o,c=.86*c;else{if(!e.isOPiece)return null;l=s}var p="translate("+t+","+r+"),scale("+c+")";return n.createElement(l,{transform:p})}}),h=n.createClass({displayName:"SquareButtonLayer",_handleClick:function(){this.props.onClick&&this.props.onClick({planeIndex:this.props.planeIndex,rowIndex:this.props.rowIndex,colIndex:this.props.colIndex})},render:function(){var e=this.props.x,t=this.props.y;return n.DOM.rect({className:"square-button-layer",x:e-.5,y:t-.5,width:1,height:1,onClick:this._handleClick})}}),f=n.createClass({displayName:"GameBoardPlane",render:function(){for(var e=this.props.boardState,t=this.props.planeIndex,r=this.props.y||0,o=this.props.skew||0,s=this.props.t,i=n.createElement(a,{skew:o}),f=[],m=0;4>m;m+=1)for(var d=m-1.5,y=0;4>y;y+=1){var v=y-1.5,x=(t+y+m)%4,g=u[x],b=g+c*s/(2*Math.PI),S=1+l*Math.abs(Math.sin(b)),$=e.getSquare(t,m,y),w=n.createElement(p,{key:"piece-"+m+"-"+y,squareState:$,x:v,y:d,flashScale:S});if(w&&f.push(w),$.clickable){var _=n.createElement(h,{key:"button-"+m+"-"+y,planeIndex:t,rowIndex:m,colIndex:y,x:v,y:d,onClick:this.props.onClickSquare});f.push(_)}}var P=n.DOM.g({transform:"skewX("+o+")"},f);return n.DOM.g({transform:"translate(0,"+r+")"},i,P)}}),m=n.createClass({displayName:"GameBoard",render:function(){for(var e=-30,t=5,r=this.props.t,a=this.props.onClickSquare,o=[],s=-2.5*t,i=0;4>i;i+=1,s+=t){var c=n.createElement(f,{key:"plane"+i,t:r,planeIndex:i,boardState:this.props.boardState,y:s,skew:e,onClickSquare:a});o.push(c)}return n.DOM.g(null,o)}});t.exports=m},{"../core/AnimStates":73,"./OPiece.react":67,"./Plane.react":68,"./XPiece.react":71,"_external/lodash":61,"_external/react":62}],67:[function(e,t,r){"use strict";var n=e("_external/react"),a=e("./FlatO.react"),o=(e("_external/lodash"),n.createClass({displayName:"OPiece",render:function(){var e=.05,t=n.createElement(a,{className:"o-piece-front",transform:"skewX(0)"}),r=n.createElement(a,{className:"o-piece-side",transform:"translate(0,"+e+"),skewX(0)"});return n.DOM.g({transform:this.props.transform},r,t)}}));t.exports=o},{"./FlatO.react":64,"_external/lodash":61,"_external/react":62}],68:[function(e,t,r){"use strict";var n=e("_external/react"),a=(e("_external/lodash"),n.createClass({displayName:"HorizontalBeam",render:function(){var e=this.props.thickness/2;return n.DOM.rect({x:this.props.x-e,y:this.props.y-e,width:this.props.width+this.props.thickness,height:this.props.thickness,className:"plane-horizontal-beam"})}})),o=n.createClass({displayName:"VerticalBeam",render:function(){var e=this.props.thickness/2;return n.DOM.rect({x:this.props.x-e,y:this.props.y-e,width:this.props.thickness,height:this.props.height+this.props.thickness,className:"plane-vertical-beam"})}}),s=n.createClass({displayName:"FlatPlane",render:function(){for(var e=[],t=0;5>t;t+=1){var r=n.createElement(a,{key:"h"+t,x:-2,y:t-2,width:4,thickness:.1}),s=n.createElement(o,{key:"v"+t,x:t-2,y:-2,height:4,thickness:.1});e.push(r),e.push(s)}return n.DOM.g({className:this.props.className,transform:this.props.transform},e)}}),i=n.createClass({displayName:"Plane",render:function(){var e=.05,t=this.props.skew||0,r=n.createElement(s,{className:"plane-top",transform:"skewX("+t+")"}),a=n.createElement(s,{className:"plane-bottom",transform:"translate(0,"+e+"),skewX("+t+")"});return n.DOM.g({transform:this.props.transform},a,r)}});t.exports=i},{"_external/lodash":61,"_external/react":62}],69:[function(e,t,r){"use strict";var n=e("_external/react"),a=e("./GameBoard.react"),o=n.createClass({displayName:"Playfield",render:function(){var e=this.props.sceneFrameProperties,t=n.createElement(a,{t:this.props.t,skew:e.skew,boardState:this.props.boardState,onClickSquare:this.props.onClickSquare}),r=n.DOM.g({transform:"translate(300,600),scale(40)"},t);return r}});t.exports=o},{"./GameBoard.react":66,"_external/react":62}],70:[function(e,t,r){"use strict";var n=e("_external/react"),a=e("./Playfield.react"),o=e("./Chrome.react"),s=n.createClass({displayName:"SceneFrame",render:function(){var e=this.props.sceneFrameProperties,t=this.props.playerTurn,r=n.DOM.rect({className:"backdrop",x:0,y:0,width:1e5,height:1e5}),s=n.createElement(a,{sceneFrameProperties:e,t:this.props.t,boardState:this.props.boardState,onClickSquare:this.props.onClickSquare}),i=n.createElement(o,{playerTurn:t,transform:"translate(690,400)",sceneFrameProperties:e});return n.DOM.g(null,r,s,i)}});t.exports=s},{"./Chrome.react":63,"./Playfield.react":69,"_external/react":62}],71:[function(e,t,r){"use strict";var n=e("_external/react"),a=e("./FlatX.react"),o=(e("_external/lodash"),n.createClass({displayName:"XPiece",render:function(){var e=.05,t=n.DOM.rect({width:.34,x:-.67,y:-.5,height:e,className:"x-piece-side"}),r=n.DOM.rect({width:.34,x:.33,y:-.5,height:e,className:"x-piece-side"}),o=n.DOM.rect({width:.34,x:-.67,y:.5,height:e,className:"x-piece-bottom"}),s=n.DOM.rect({width:.34,x:.33,y:.5,height:e,className:"x-piece-bottom"}),i=n.createElement(a,{className:"x-piece-front",transform:"skewX(0)"}),c=n.createElement(a,{className:"x-piece-side",transform:"translate(0,"+e+"),skewX(0)"});return n.DOM.g({transform:this.props.transform},c,t,r,o,s,i)}}));t.exports=o},{"./FlatX.react":65,"_external/lodash":61,"_external/react":62}],72:[function(e,t,r){"use strict";t.exports={xPieceScale:.86,oPieceScale:1}},{}],73:[function(e,t,r){"use strict";t.exports={SPAWNING:1,HIGHLIGHTED:2,FLASHING:3}},{}],74:[function(e,t,r){"use strict";function n(e){this.data=e||new Int32Array(4)}var a=e("_external/lodash");n.prototype.getPlayerAt=function(e){var t=32>e?this.data[0]:this.data[1],r=32>e?e:e-32,n=t>>>r&1;if(!n)return 0;var a=32>e?this.data[2]:this.data[3];return n=a>>>r&1,n?1:-1},n.prototype.setPlayerAt=function(e,t){var r=this.data;if(32>e){var a=r[0],o=r[2],s=e,i=1<<s;a|=i,t>0?o|=i:o&=~i;var c=new Int32Array(4);return c[0]=a,c[1]=r[1],c[2]=o,c[3]=r[3],new n(c)}var a=r[1],o=r[3],s=e-32,i=1<<s;a|=i,t>0?o|=i:o&=~i;var c=new Int32Array(4);return c[0]=r[0],c[1]=a,c[2]=r[2],c[3]=o,new n(c)},n.prototype.isSquareEmpty=function(e){var t=32>e?this.data[0]:this.data[1],r=32>e?e:e-32,n=t>>>r&1;return!n},n.prototype.getOccupiedSquareCount=function(){for(var e=0,t=this.data[0],r=this.data[1],n=0;32>n;n+=1)e+=(1&t)+(1&r),t>>>=1,r>>>=1;return e},n.prototype.getDebugString=function(){for(var e=[],t=0;64>t;t+=1){var r=this.getPlayerAt(t);e.push(r>0?"x":0>r?"o":"-")}return e.join("")},n.emptyBoard=new n,n.readFromString=function(e){var t=new n,r=e&&e.length||0;r>64&&(r=64);for(var a=0;r>a;a+=1){var o=e.charAt(a);"x"===o||"X"===o?t=t.setPlayerAt(a,1):("o"===o||"O"===o)&&(t=t.setPlayerAt(a,-1))}return t},n.generateRandom=function(e){var t=a.shuffle(a.range(0,63)),r=new n;e>32&&(e=32);for(var o=1,s=0;e>0;)r=r.setPlayerAt(t[s],o),e-=1,s+=1,o=-o;return r},t.exports=n},{"_external/lodash":61}],75:[function(e,t,r){"use strict";function n(e){this.stepsPerTick=e.stepsPerTick||l,this.playerIndex=e.playerIndex||-1,this.delayBetweenTicks=o.isUndefined(e.delayBetweenTicks)?p:e.delayBetweenTicks,this.favoriteSquares=s();for(var t=new Array(64),r=0;64>r;r+=1){var n=this.favoriteSquares[r];t[n]=64-r}this.squarePrefScores=t}var a=e("babel-runtime/core-js/promise")["default"],o=e("_external/lodash"),s=e("./generateSquarePreferences"),i=(e("./PrincipalVariation"),e("./MoveComputation")),c=(e("./GameState"),e("./Ply")),u=e("./MoveResponse"),l=2e4,p=1;n.prototype.makeMove=function(e,t){var r=this,n=this,o=!1,s=(new Date).getTime();t=t||this.playerIndex;var l=new a(function(a,l){function p(e){var t=(new Date).getTime(),r=new u({square:e,timeTaken:t-s,interrupted:o});a(r)}var h=e.getOccupiedSquareCount();if(1>h)return void p(n.favoriteSquares[0]);var f=void 0;f=3>h?2:8>h?3:32>h?4:5;var m=new i({plyClass:c,maxDepth:f,player:t,gameState:e,squarePrefScores:r.squarePrefScores}),d=function y(){if(m.execute(n.stepsPerTick),o&&(m.done=!0),m.done){var e=m.getBestMove();console.log("pv:"),console.log(m.pv.debugGetLine()),p(e)}else setTimeout(y,n.delayBetweenTicks)};d()});return{interrupt:function(){o=!0},result:l}},n.prototype.isComputerPlayer=!0,t.exports=n},{"./GameState":77,"./MoveComputation":81,"./MoveResponse":82,"./Ply":85,"./PrincipalVariation":86,"./generateSquarePreferences":89,"_external/lodash":61,"babel-runtime/core-js/promise":2}],76:[function(e,t,r){"use strict";function n(e){this.player1=e.player1,this.player2=e.player2,this.onStateChange=e.onStateChange,this.metaState=e.metaState||new s}function a(e,t){e.metaState=t,e.onStateChange&&e.onStateChange(t)}function o(e,t){var r=t.gameState;return console.log(r),console.log(r.getSolutionScoreSummary()),r.gameOver?(console.log("GAME OVER"),t=t.set("phase",i.GAME_OVER),void a(e,t)):(t=t.flipPlayerTurn(),void setTimeout(function(){e.metaState=t,c(e)}))}var s=(e("_external/lodash"),e("_external/Immutable"),e("./GameState"),e("./MetaGameState")),i=e("./phaseCodes"),c=void 0;c=function(e){var t=e.metaState,r=t.playerTurn,n=r>0?e.player1:e.player2;n&&n.isComputerPlayer?!function(){t=t.set("phase",i.THINKING),a(e,t);var s=t.gameState,c=n.makeMove(s,r);e._interrupt=c.interrupt?c.interrupt:null,c.result.then(function(n){console.log(n);var a=s.placePiece(n.square,r);t=t.set("lastMove",n.square).set("gameState",a),setTimeout(function(){return o(e,t)})})}():(t=t.set("phase",i.WAITING_FOR_HUMAN),a(e,t))},n.prototype.start=function(){var e=this.metaState;e.isGameStarted||c(this)},n.prototype.interrupt=function(){this._interrupt&&this._interrupt()},n.prototype.submitMove=function(e){var t=this,r=this.metaState;if(r.isWaitingForHuman){var n=r.gameState;if(n.isLegalMove(e)){var a=r.playerTurn,s=n.placePiece(e,a);r=r.set("lastMove",e).set("gameState",s),setTimeout(function(){return o(t,r)})}}},t.exports=n},{"./GameState":77,"./MetaGameState":79,"./phaseCodes":91,"_external/Immutable":59,"_external/lodash":61}],77:[function(e,t,r){"use strict";function n(e){this.balance=e.balance,this.solutionScores=e.solutionScores,this.winner=e.winner,this.gameOver=0!==e.winner,this.contents=e.contents||i.emptyBoard}{var a=e("_external/Immutable"),o=e("./solutionMap"),s=e("./solutionStates"),i=e("./BoardContents"),c=a.List(a.Repeat(s.empty,o.solutionCount));o.solutionCount*s.emptyValue}n.prototype.placePiece=function(e,t){for(var r=o.getSolutionsForSquare(e),a=this.balance,s=-t,i=this.solutionScores,c=this.winner,u=this.contents.setPlayerAt(e,t),l=r.length,p=0;l>p;p+=1){var h=r[p],f=i.get(h);a-=t*f.score(t),a-=s*f.score(s);var m=f.play(t);a+=t*m.score(t),a+=s*m.score(s),m.isWinFor(t)&&(c=t),i=i.set(h,m)}return new n({contents:u,solutionScores:i,balance:a,winner:c})},n.prototype.isSquareOccupied=function(e){return!this.contents.isSquareEmpty(e)},n.prototype.isSquareEmpty=function(e){return this.contents.isSquareEmpty(e)},n.prototype.isLegalMove=n.prototype.isSquareEmpty,n.prototype.getPlayerAt=function(e){return this.contents.getPlayerAt(e)},n.prototype.getOccupiedSquareCount=function(){return this.contents.getOccupiedSquareCount()},n.prototype.getOccupiedSquares=function(){for(var e=[],t=0;64>t;t+=1)this.contents.isSquareEmpty(t)||e.push(t);return e},n.prototype.getWinningSquares=function(){if(this._winningSquares)return this._winningSquares;var e=a.Set();return this.solutionScores.forEach(function(t,r){if(t.isWin){var n=o.solutions.get(r),a=n.squares;a.forEach(function(t){return e=e.add(t)})}}),this._winningSquares=e,e},n.prototype.getSolutionScoreSummary=function(){var e={};return this.solutionScores.forEach(function(t){t.description;if(t.description){var r=e[t.description]||0;e[t.description]=r+1}}),e};var u=new n({contents:i.emptyBoard,solutionScores:c,balance:0,winner:0});n.defaultGameState=u,t.exports=n},{"./BoardContents":74,"./solutionMap":93,"./solutionStates":94,"_external/Immutable":59}],78:[function(e,t,r){"use strict";function n(e){this.host=e.host,this.sceneFrameProperties=e.sceneFrameProperties||s.defaultProperties,this.playerTurn=0,this.boardState=i.emptyBoard}var a=(e("_external/lodash"),e("_external/react")),o=(e("_external/Immutable"),
e("../components/SceneFrame.react")),s=e("./SceneFrameProperties"),i=e("./PhysicalBoardState"),c=e("./getPhysicalState"),u=e("./Game"),l=e("./ComputerPlayer");n.prototype.handleMetaGameStateChange=function(e){var t=c({humanCanMove:e.isWaitingForHuman,lastMove:e.lastMove},e.gameState);console.log(e.gameState.balance),this.boardState=t,this.playerTurn=e.playerTurn,this.invalidate()},n.prototype.handleSquareClicked=function(e){if(console.log("square clicked:"),console.log(e),this.game){var t=16*e.planeIndex+4*e.rowIndex+e.colIndex;this.game.submitMove(t)}},n.prototype.handleAnimationFrame=function(e){var t=a.createElement(o,{sceneFrameProperties:this.sceneFrameProperties,t:e,playerTurn:this.playerTurn,boardState:this.boardState,onClickSquare:this.handleSquareClicked.bind(this)});a.render(t,this.host),this.boardState.isAnimating&&this.invalidate()},n.prototype.invalidate=function(){this.running&&(this.updateLevel>0?this.dirty=!0:window.requestAnimationFrame(this.handleAnimationFrame.bind(this)))},n.prototype.run=function(){this.running=!0,this.invalidate()},n.prototype.stop=function(){this.running=!1},n.prototype.beginUpdate=function(){this.updateLevel+=1},n.prototype.endUpdate=function(){if(this.updateLevel-=1,0===this.updateLevel)this.dirty&&(this.dirty=!1,this.invalidate());else if(this.updateLevel<0)throw new Error("each call to endUpdate must match a call to beginUpdate")},n.prototype.runSandboxGame=function(){var e=null,t=new l({playerIndex:-1}),r=new u({player1:e,player2:t,onStateChange:this.handleMetaGameStateChange.bind(this)});this.game=r,r.start()},t.exports=n},{"../components/SceneFrame.react":70,"./ComputerPlayer":75,"./Game":76,"./PhysicalBoardState":83,"./SceneFrameProperties":87,"./getPhysicalState":90,"_external/Immutable":59,"_external/lodash":61,"_external/react":62}],79:[function(e,t,r){"use strict";var n=(e("_external/lodash"),e("_external/Immutable")),a=e("./GameState"),o=e("./phaseCodes"),s=e("./players"),i=n.Record({gameState:a.defaultGameState,phase:o.INIT,lastMove:-1,playerTurn:s.X});i.prototype.flipPlayerTurn=function(){var e=this.playerTurn;return this.set("playerTurn",s.opposite(e))},Object.defineProperty(i.prototype,"isThinking",{get:function(){return this.phase===o.THINKING},enumerable:!0}),Object.defineProperty(i.prototype,"isWaitingForHuman",{get:function(){return this.phase===o.WAITING_FOR_HUMAN},enumerable:!0}),Object.defineProperty(i.prototype,"isGameOver",{get:function(){return this.phase===o.GAME_OVER},enumerable:!0}),Object.defineProperty(i.prototype,"isGameStarted",{get:function(){return this.phase!==o.INIT},enumerable:!0}),t.exports=i},{"./GameState":77,"./phaseCodes":91,"./players":92,"_external/Immutable":59,"_external/lodash":61}],80:[function(e,t,r){"use strict";function n(e){this.square=e.square,this.state=e.state,this.balance=e.state.balance,this.value=e.value,this.affinity=e.affinity}t.exports=n},{}],81:[function(e,t,r){"use strict";function n(e){this.plyClass=e.plyClass,this.maxDepth=e.maxDepth||4,this.gameState=e.gameState,this.player=e.player,this.squarePrefScores=e.squarePrefScores,this.pv=new a(this.maxDepth),this.iteration=0,this.stack=null,this.done=!1,this.alphaCutoffCount=0,this.betaCutoffCount=0}var a=e("./PrincipalVariation");n.prototype.getBestMove=function(){return this.pv.getBestMove()},n.prototype.answer=function(){return null},n.prototype.process=function(){if(this.done)return!0;var e=this.plyClass;if(!this.stack){if(!(this.iteration<this.maxDepth))return this.done=!0,!0;this.iteration+=1,this.stack=new e({root:!0,player:this.player,host:this,gameState:this.gameState,depth:this.iteration-1})}return this.stack=this.stack.process(),this.done},n.prototype.execute=function(e){for(e=e||1;e>0&&!this.done;)this.process(),e-=1;return this.done},t.exports=n},{"./PrincipalVariation":86}],82:[function(e,t,r){"use strict";function n(e){this.square=e.square,this.interrupted=!!e.interrupted,this.timeTaken=e.timeTaken}t.exports=n},{}],83:[function(e,t,r){"use strict";function n(e){return!1==this instanceof n?new n(e):void(this._squares=e&&e.squares?e.squares:l)}function a(e){if(e>=0&&3>=e)return e;throw new Error("dimension out of range: "+e)}function o(e,t,r){return 16*a(e)+4*a(t)+a(r)}var s=e("_external/Immutable"),i=e("_external/lodash"),c=e("./PhysicalSquareState"),u=c.defaultState,l=s.Map();n.prototype.withNewSquares=function(e){return new n({squares:e})},n.prototype.getSquare=function(e,t,r){var n=o(e,t,r),a=this._squares.get(n);return a?a:u},n.prototype.updateSquare=function(e,t,r,n){var a=o(e,t,r),i=this._squares.get(a);if(i){var c=n(i);return c?s.is(c,u)?this.withNewSquares(this._squares.remove(a)):s.is(c,i)?this:this.withNewSquares(this._squares.set(a,c)):this.withNewSquares(this._squares.remove(a))}var c=n(u);return c&&!s.is(c,u)?this.withNewSquares(this._squares.set(a,c)):this},Object.defineProperty(n.prototype,"isAnimating",{get:function(){var e=this._isAnimating;return i.isUndefined(e)&&(e=this._squares.some(function(e){return e.isAnimating}),this._isAnimating=e),e}}),n.readFromString=function(e){var t=e&&e.length||0;t>64&&(t=64);for(var r=l,a=0;t>a;a+=1){var o=e.charAt(a);"x"===o||"X"===o?r=r.set(a,c.xPiece):("o"===o||"O"===o)&&(r=r.set(a,c.oPiece))}return new n({squares:r})},n.prototype.writeToString=function(){for(var e=[],t=0;64>t;t+=1){var r=this._squares.get(t),n=(r||u).pieceType;e.push(1===n?"x":2===n?"o":".")}return e.join("")},n.emptyBoard=new n,n.baseSquareMap=l,t.exports=n},{"./PhysicalSquareState":84,"_external/Immutable":59,"_external/lodash":61}],84:[function(e,t,r){"use strict";var n=e("_external/Immutable"),a=e("./AnimStates"),o=n.Record({pieceType:0,clickable:!0,animState:null,animPhaseOffset:0});Object.defineProperty(o.prototype,"isXPiece",{get:function(){return this.pieceType>0},enumerable:!0}),Object.defineProperty(o.prototype,"isOPiece",{get:function(){return this.pieceType<0},enumerable:!0}),Object.defineProperty(o.prototype,"isOccupied",{get:function(){return 0!==this.pieceType},enumerable:!0}),Object.defineProperty(o.prototype,"isAnimating",{get:function(){return this.animState===a.FLASHING},enumerable:!0});var s=new o;o.defaultState=s,o.clickableEmpty=s,o.nonClickableEmpty=s.set("clickable",!1),o.xPiece=new o({pieceType:1,clickable:!1}),o.oPiece=new o({pieceType:-1,clickable:!1}),o.playerPiece=function(e){return e>0?o.xPiece:0>e?o.oPiece:o.defaultState},t.exports=o},{"./AnimStates":73,"_external/Immutable":59}],85:[function(e,t,r){"use strict";function n(e,t){var r=t.balance-e.balance;return 0===r&&(r=t.affinity-e.affinity),r}function a(e,t){var r=e.balance-t.balance;return 0===r&&(r=t.affinity-e.affinity),r}function o(e,t,r,o){for(var s=[],u=null,l=0;64>l;l+=1)if(e.isSquareEmpty(l)){var p=e.placePiece(l,r),h=new c({state:p,square:l,balance:p.balance,value:r*p.balance,affinity:t[l]});o===l?u=h:s.push(h)}for(var f=s.length,m=Number.NEGATIVE_INFINITY,d=-1,y=0;f>y;y+=1){var h=s[y];h.value>m&&(m=h.value,d=y)}if(d>=0){var h=s[d];s.splice(d,1),s.unshift(h)}var v=r>0?n:a;return s=i.sortBy(s,v),u&&s.unshift(u),s}function s(e){var t=e.host,r=t.pv,n=t.squarePrefScores,a=!!e.root,s=a||!!e.left;this.root=a,this.left=s,this.player=e.player,this.host=t;var i=-1;s&&(i=r.getBestMove(e.ply)),this.depth=e.depth,this.gameState=e.gameState,this.moves=a?o(e.gameState,n,this.player,i):o(e.gameState,n,this.player,i),this.moveCount=this.moves.length,this.nextMovePtr=0,a?(this.alpha=Number.NEGATIVE_INFINITY,this.beta=Number.POSITIVE_INFINITY,this.parent=t,this.ply=0):(this.alpha=e.alpha,this.beta=e.beta,this.parent=e.parent,this.ply=e.ply)}var i=e("_external/lodash"),c=e("./MoveCandidate");s.prototype.process=function(){if(this.nextMovePtr>=this.moveCount)return this.parent.answer(this.alpha);var e=this.moves[this.nextMovePtr],t=e.square;this.lastMove=t,this.nextMovePtr+=1;var r=e.state;if(r.gameOver||this.depth<=0){var n=this.player*r.balance;return n>=this.beta?(this.host.betaCutoffCount+=1,this.parent.answer(this.beta)):(n>this.alpha&&(this.alpha=n,this.host.alphaCutoffCount+=1,this.host.pv.updateBestMove(this.ply,t)),this)}var a=new s({host:this.host,parent:this,gameState:r,left:this.left&&1===this.nextMovePtr,depth:this.depth-1,ply:this.ply+1,player:-this.player,alpha:-this.beta,beta:-this.alpha});return a.process()},s.prototype.answer=function(e){return e=-e,e>=this.beta?this.parent.answer(this.beta):(e>this.alpha&&(this.alpha=e,this.host.pv.updateBestMove(this.ply,this.lastMove)),this)},t.exports=s},{"./MoveCandidate":80,"_external/lodash":61}],86:[function(e,t,r){"use strict";function n(e){this.depth=e;for(var t=e*e,r=new Array(t),n=0;t>n;n+=1)r[n]=-1;this.line=r}n.prototype.getBestMove=function(e){return e=e||0,this.line[e]},n.prototype.updateBestMove=function(e,t){var r=e*this.depth;if(this.line[r]=t,e<this.depth-1)for(var n=r+1,a=r+this.depth,o=this.depth-e-1;o>0;)this.line[n]=this.line[a],a+=1,n+=1,o-=1},n.prototype.debugGetLine=function(){return this.line.slice(0,this.depth)},t.exports=n},{}],87:[function(e,t,r){"use strict";var n=e("_external/Immutable"),a=n.Record({width:800,height:800,chromeWidth:200,chromeMargin:10,skew:-30});a.defaultProperties=new a,t.exports=a},{"_external/Immutable":59}],88:[function(e,t,r){"use strict";function n(e,t,r,n){this.squares=a.List([e,t,r,n])}var a=e("_external/Immutable");t.exports=n},{"_external/Immutable":59}],89:[function(e,t,r){"use strict";function n(e,t,r,n){for(var a=0;2>a;a+=1)for(var o=t[a],s=0;2>s;s+=1)for(var i=r[s],c=0;2>c;c+=1){var u=n[c];e.push(16*u+4*i+o)}}function a(){var e=o.shuffle(c),t=o.shuffle(u),r=e.concat(t);return r}var o=e("_external/lodash"),s=[0,3],i=[1,2],c=function(){var e=[];return n(e,i,i,i),n(e,s,s,s),e}(),u=function(){var e=[];return n(e,i,i,s),n(e,i,s,i),n(e,s,i,i),n(e,s,s,i),n(e,s,i,s),n(e,i,s,s),e}();t.exports=a},{"_external/lodash":61}],90:[function(e,t,r){"use strict";function n(e,t){for(var r=e&&e.humanCanMove,n=e.lastMove||-1,i=t.getWinningSquares(),c=r?o.clickableEmpty:o.nonClickableEmpty,u=a.baseSquareMap,l=0;64>l;l+=1){var p=t.getPlayerAt(l),h=void 0;p?(h=o.playerPiece(p),i.has(l)?h=h.set("animState",s.FLASHING):l===n&&(h=h.set("animState",s.HIGHLIGHTED))):h=c,u=u.set(l,h)}return new a({squares:u})}var a=e("./PhysicalBoardState"),o=e("./PhysicalSquareState"),s=e("./AnimStates");t.exports=n},{"./AnimStates":73,"./PhysicalBoardState":83,"./PhysicalSquareState":84}],91:[function(e,t,r){"use strict";t.exports={INIT:0,WAITING_FOR_HUMAN:1,THINKING:2,GAME_OVER:3}},{}],92:[function(e,t,r){"use strict";function n(e){return e>0?-1:1}function a(e){return e>0?"X":0>e?"O":"-"}var o=1,s=-1;t.exports={X:o,O:s,opposite:n,pieceName:a}},{}],93:[function(e,t,r){"use strict";function n(){}function a(){function e(e,t){var r=a[e];r.push(t)}function t(t,r,n,a){var o=new i(t,r,n,a);c=c.push(o),e(t,u),e(r,u),e(n,u),e(a,u),u+=1}function r(e,r){var n=e+r,a=n+r,o=a+r;t(e,n,a,o)}for(var a=[],c=s.List(),u=0,l=0;64>l;l+=1)a[l]=[];for(var l=0;4>l;l+=1){for(var p=16*l,h=0;4>h;h+=1)r(p+4*h,1),r(p+h,4),r(4*l+h,16);r(p,5),r(p+3,3),r(4*l,17),r(4*l+3,15),r(l,20),r(12+l,12)}r(0,21),r(3,19),r(12,13),r(15,11),o(a);var f=new n;return f._solutions=c,f._squares=a,f}var o=e("babel-runtime/core-js/object/freeze")["default"],s=e("_external/Immutable"),i=e("./Solution");n.prototype.getSolutionsForSquare=function(e){return this._squares[e]},n.prototype.getSquaresForSolution=function(e){var t=this._solutions.get(e);return t.squares},Object.defineProperty(n.prototype,"solutions",{get:function(){return this._solutions},enumerable:!0}),Object.defineProperty(n.prototype,"solutionCount",{get:function(){return this._solutions.size},enumerable:!0}),t.exports=a()},{"./Solution":88,"_external/Immutable":59,"babel-runtime/core-js/object/freeze":1}],94:[function(e,t,r){"use strict";function n(e){return this.playerIndex===e}function a(e){this.playerIndex=e,this.description=s.pieceName(e)+" win"}function o(e,t,r,n){this.playerIndex=e,this._score=t,this.nextState=r,this.description=n}var s=e("./players"),i=1e5,c=1e3,u=5,l=2,p=1,h=0,f={play:function(){return this},score:function(){return h},isWinFor:function(){return!1},canWin:function(){return!1},isWin:!1};a.prototype.play=function(){return this},a.prototype.score=function(e){return e===this.playerIndex?i:0},a.prototype.isWinFor=n,a.prototype.canWin=n,a.prototype.isWin=!0,o.prototype.play=function(e){return e===this.playerIndex?this.nextState:f},o.prototype.score=function(e){return e===this.playerIndex?this._score:0},o.prototype.isWinFor=function(){return!1},o.prototype.isWin=!1,o.prototype.canWin=n;var m=new a(s.X),d=new o(s.X,c,m,"XXX"),y=new o(s.X,u,d,"XX"),v=new o(s.X,l,y,"X"),x=new a(s.O),g=new o(s.O,c,x,"OOO"),b=new o(s.O,u,g,"OO"),S=new o(s.O,l,b,"O"),$={play:function(e){return e===s.X?v:S},score:function(){return p},isWinFor:function(){return!1},canWin:function(){return!0},isWin:!1};t.exports={empty:$,x1:v,x2:y,x3:d,xWin:m,o1:S,o2:b,o3:g,oWin:x,stalemate:f,emptyValue:p}},{"./players":92}],95:[function(e,t,r){"use strict";function n(){var e=document.getElementById("game-container"),t=new o({host:e});t.run(),t.runSandboxGame()}{var a=(e("_external/react"),e("_external/lodash"),e("_external/Immutable"),e("_external/jquery")),o=e("./core/MainDriver");e("sandbox/sandbox1")}a(document).ready(n)},{"./core/MainDriver":78,"_external/Immutable":59,"_external/jquery":60,"_external/lodash":61,"_external/react":62,"sandbox/sandbox1":96}],96:[function(e,t,r){"use strict";function n(){console.log("in sandbox 1");var e=document.getElementById("game-container"),t=u.readFromString("xo..xxooxox..xx.xx.oooo.xo..o.o.ooxo.oxo.oo..x.xx.xxx.xx.xoxx.x."),r=(a.createElement(o,{transform:"skewX(-30)"}),a.createElement(s,{transform:"translate(1.5,0),skewX(-30)"}),a.createElement(i,{transform:"skewX(0)"}),a.createElement(c,{skew:-30,boardState:t,onClickSquare:function(e){console.log("square clicked:"),console.log(e)}})),n=(a.DOM.rect({className:"backdrop",x:0,y:0,width:1e5,height:1e5}),a.createElement("g",{transform:"translate(400,600),scale(40)"},r),a.createElement(h,{transform:"translate(690,400)"}),m.defaultProperties),l=a.createElement(f,{sceneFrameProperties:n,boardState:t,onClickSquare:function(e){console.log("square clicked:"),console.log(e)}});a.render(l,e),d.test2()}var a=e("_external/react"),o=(e("_external/lodash"),e("_external/Immutable"),e("../components/XPiece.react")),s=e("../components/OPiece.react"),i=e("../components/Plane.react"),c=e("../components/GameBoard.react"),u=e("../core/PhysicalBoardState"),l=(e("../core/solutionMap"),e("../core/GameState")),p=e("../core/ComputerPlayer"),h=(e("../core/generateSquarePreferences"),e("../core/BoardContents"),e("../components/Chrome.react")),f=e("../components/SceneFrame.react"),m=e("../core/SceneFrameProperties"),d=function(){function e(){function e(e){if(console.log(e.contents.getDebugString()),e.gameOver){var t=e.getWinningSquares();console.log(t.toJS())}}function t(a,o){var s=a?r:n;return console.log(s),o.gameOver?(console.log("game over"),void e(o)):void s.makeMove(o).result.then(function(r){console.log(r);var n=o.placePiece(r.square,s.playerIndex);e(n),setTimeout(function(){t(!a,n)})})}var r=new p({playerIndex:1}),n=new p({playerIndex:-1});t(!0,l.defaultGameState)}return{test2:e}}();t.exports=n},{"../components/Chrome.react":63,"../components/GameBoard.react":66,"../components/OPiece.react":67,"../components/Plane.react":68,"../components/SceneFrame.react":70,"../components/XPiece.react":71,"../core/BoardContents":74,"../core/ComputerPlayer":75,"../core/GameState":77,"../core/PhysicalBoardState":83,"../core/SceneFrameProperties":87,"../core/generateSquarePreferences":89,"../core/solutionMap":93,"_external/Immutable":59,"_external/lodash":61,"_external/react":62}]},{},[95]);